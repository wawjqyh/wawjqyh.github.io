(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["docs/others/ellipse"],{LArX:function(e,n){var t='<h1 id="\u6587\u5b57\u6ea2\u51fa\u548c\u6362\u884c">\u6587\u5b57\u6ea2\u51fa\u548c\u6362\u884c</h1> <h2 id="1-\u573a\u666f">1 \u573a\u666f</h2> <h3 id="11-\u6587\u5b57\u6ea2\u51fa">1.1 \u6587\u5b57\u6ea2\u51fa</h3> <p>\u5982\u4e0b\u56fe\uff0c\u6846\u5185\u662f\u4e00\u4e2a\u6587\u5b57\u663e\u793a\u533a\u57df\uff0c\u53ef\u4ee5\u770b\u5230\u67d0\u4e9b\u884c\u7684\u672b\u5c3e\u6709\u6bd4\u8f83\u591a\u7684\u7a7a\u767d\uff0c\u8fd9\u662f\u4e3a\u4ec0\u4e48\u5462\uff1f\u4ed4\u7ec6\u89c2\u5bdf\u4f1a\u53d1\u73b0\uff0c\u662f\u56e0\u4e3a\u672b\u5c3e\u7684\u533a\u57df\u65e0\u6cd5\u663e\u793a\u4e0b\u4e00\u4e2a\u5b8c\u6574\u7684\u5355\u8bcd\uff0c\u4e3a\u4e86\u9605\u8bfb\u4f53\u9a8c\u66f4\u597d\u4f1a\u53e6\u8d77\u4e00\u884c\u3002</p> <p>\u90a3\u4e48\u56e0\u4e3a\u8fd9\u79cd\u7279\u6027\uff0c\u5c31\u4f1a\u51fa\u73b0\u6587\u5b57\u6ea2\u51fa\u7684 bug\uff0c\u5982\u4e0b\u56fe\uff0c\u6709\u4e00\u4e2a\u8d85\u957f\u7684\u201c\u5355\u8bcd\u201d\u8d85\u8fc7\u4e86\u8fb9\u754c\u3002\u8fd9\u79cd\u4e2d\u95f4\u6ca1\u6709\u7a7a\u683c\u7684\u4e00\u4e32\u5b57\u6bcd\u4f1a\u88ab\u8ba4\u4e3a\u662f\u4e00\u4e2a\u5355\u8bcd\uff0c\u90a3\u4e48\u5c31\u76f4\u63a5\u6ea2\u51fa\u4e86\u3002</p> <h3 id="12-\u6587\u5b57\u6362\u884c">1.2 \u6587\u5b57\u6362\u884c</h3> <p>\u5982\u4e0b\u56fe\uff0c\u67d0\u4e2a\u4f5c\u54c1\u7684\u6807\u9898\u5f88\u957f\uff0c\u7136\u540e\u6362\u884c\u4e86\u3002\u4f46\u662f\u8fd9\u91cc\u7684\u8bbe\u8ba1\u662f\u6309\u7167\u5355\u884c\u6587\u5b57\u6765\u663e\u793a\u7684\uff0c\u8fd9\u6837\u5c31\u4f1a\u9020\u6210\u6837\u5f0f\u9519\u4e71\u3002</p> <h2 id="2-\u89e3\u51b3\u65b9\u6848">2 \u89e3\u51b3\u65b9\u6848</h2> <h3 id="21-\u6587\u5b57\u6ea2\u51fa">2.1 \u6587\u5b57\u6ea2\u51fa</h3> <p>\u8fd9\u4e24\u4e2a\u95ee\u9898\u5e76\u4e0d\u662f\u4ec0\u4e48\u7591\u96be\u6742\u75c7\uff0c\u51fa\u73b0\u7684\u539f\u56e0\u5927\u591a\u662f\u6ca1\u6709\u8003\u8651\u5230\u8fd9\u4e9b\u60c5\u51b5\uff0c\u7136\u540e\u6f0f\u5199\u4e86\u4e00\u4e9b\u6837\u5f0f\u3002</p> <p>\u5bf9\u4e8e\u6587\u5b57\u6ea2\u51fa\u7684\u95ee\u9898\uff0c\u6709\u4e24\u79cd\u89e3\u51b3\u65b9\u5f0f\u3002</p> <p>\u4e00\u662f\u4e0d\u5f3a\u5236\u65ad\u8bcd\uff0c\u8ba9\u6ea2\u51fa\u7684\u5355\u8bcd\u6362\u884c\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code class="language-css">word-wrap: break-word;</code></pre> <p>\u6216\u8005</p> <pre><code class="language-css">word-break: break-word;</code></pre> <p>\u52a0\u4e0a\u8fd9\u4e2a\u6837\u5f0f\u5c31\u80fd\u5b9e\u73b0\u4e0b\u9762\u7684\u6548\u679c\uff0c\u4f46\u8fd8\u662f\u4f1a\u6709\u95ee\u9898\uff0c\u53ef\u4ee5\u770b\u5230\u884c\u5c3e\u8fd8\u662f\u6709\u6bd4\u8f83\u591a\u7684\u7a7a\u767d\u3002\u8fd8\u6709\u4e00\u79cd\u65b9\u5f0f\u5c31\u662f\u65ad\u8bcd\u6362\u884c\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code class="language-css">word-break: break-all;</code></pre> <p>\u8fd9\u79cd\u65b9\u5f0f\u4e5f\u6709\u7f3a\u70b9\uff0c\u53ef\u4ee5\u770b\u5230\u884c\u672b\u7684\u5355\u8bcd\u88ab\u65ad\u5f00\u4e86\uff0c\u8fd9\u5c31\u4e0d\u592a\u5229\u4e8e\u9605\u8bfb\u4e86\uff0c\u4f46\u662f\u4e0d\u4f1a\u51fa\u73b0\u90a3\u4e48\u591a\u7a7a\u767d\u3002\u6240\u4ee5\u8fd9\u4e24\u79cd\u65b9\u5f0f\u8fd8\u662f\u9700\u8981\u6839\u636e\u5b9e\u9645\u7684\u60c5\u51b5\u6743\u8861\u4e00\u4e0b\u3002</p> <h3 id="22-\u6587\u5b57\u6362\u884c">2.2 \u6587\u5b57\u6362\u884c</h3> <p>\u6587\u5b57\u6362\u884c\u901a\u5e38\u89e3\u51b3\u65b9\u6cd5\u5c31\u662f\u8d85\u51fa\u663e\u793a\u7701\u7565\u53f7\u3002</p> <p>\u5355\u884c\u6587\u5b57\u663e\u793a\u7701\u7565\u53f7\uff1a</p> <pre><code class="language-css">overflow: hidden;\ntext-overflow: ellipse;\nwhite-space: nowrap;</code></pre> <p>\u591a\u884c\u6587\u5b57\u663e\u793a\u7701\u7565\u53f7\uff1a</p> <pre><code class="language-css">display: -webkit-box;\n-webkit-line-clamp: 3;\n-webkit-box-orient: vertical;\noverflow: hidden;</code></pre> <p>\u591a\u884c\u6587\u5b57\u4f7f\u7528\u4e0a\u9762\u7684\u65b9\u5f0f\u4f1a\u6709\u4e2a\u95ee\u9898\uff0c\u8d85\u51fa\u7684\u6587\u5b57\u4e0d\u4f1a\u88ab\u9690\u85cf\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u663e\u793a\u533a\u57df\u8bbe\u4e86\u5185\u8fb9\u8ddd\uff0c\u867d\u7136\u7701\u7565\u53f7\u662f\u6709\u4e86\uff0c\u4f46\u5728\u5185\u8fb9\u6846\u5185\u8fd8\u53ef\u4ee5\u770b\u5230\u8d85\u51fa\u7684\u6587\u5b57\u3002</p> <h3 id="23-ellipse-\u7ec4\u4ef6">2.3 Ellipse \u7ec4\u4ef6</h3> <p>\u6587\u5b57\u6362\u884c\u53e6\u4e00\u79cd\u89e3\u51b3\u65b9\u6848\u5c31\u662f\u5199\u4e2a\u7ec4\u4ef6\uff0c\u901a\u8fc7 js \u6765\u8ba1\u7b97\u533a\u57df\u5185\u80fd\u663e\u793a\u591a\u5c11\u4e2a\u5b57\u7b26\uff0c\u4e0d\u7528\u6bcf\u6b21\u90fd\u5199\u6837\u5f0f\u3002\u7ec4\u4ef6\u5185\u53ef\u4ee5\u6dfb\u52a0\u4e9b\u989d\u5916\u7684\u529f\u80fd\uff0c\u6bd4\u5982\u9f20\u6807\u79fb\u4e0a\u663e\u793a tooltip \u5c55\u793a\u5b8c\u6574\u7684\u6587\u5b57\u5185\u5bb9\uff0c\u6216\u8005\u70b9\u51fb\u67d0\u4e2a\u6309\u94ae\u663e\u793a\u5168\u90e8</p> <p>\u7ec4\u4ef6\u4f7f\u7528\u65b9\u5f0f\uff1a</p> <pre><code class="language-jsx">/**\n * @param {number} row \u663e\u793a\u7684\u884c\u6570\n * @param {boolean} toolTip \u8d85\u51fa\u662f\u5426\u663e\u793a toolTip\n */\n&lt;Ellipse row={3} toolTip={true}&gt;\n  \u6587\u5b57\u6587\u5b57\n&lt;/Ellipse&gt;</code></pre> <p>\u8fd9\u662f\u4e00\u4e2a react \u7684\u7ec4\u4ef6\uff0cvue \u9700\u8981\u7a0d\u5fae\u6539\u52a8\u4e00\u4e0b\u3002\u91cc\u9762\u7b97\u6cd5\u548c\u5065\u58ee\u5ea6\u8fd8\u53ef\u4ee5\u4f18\u5316\uff0c\u4e0a\u4ee3\u7801\uff1a</p> <pre><code class="language-jsx">let showHeight = 0;\n\nclass Ellipse extends Component {\n  state = {\n    ellipse: false,\n    textHidden: &#39;&#39;,\n    textShow: &#39;&#39;\n  };\n\n  constructor(props) {\n    super(props);\n    this.eleHidden = React.createRef();\n  }\n\n  componentDidMount() {\n    // \u7ec4\u4ef6\u6e32\u67d3\u5b8c\u6210\u65f6\u5224\u65ad\u662f\u5426\u9700\u8981\u663e\u793a\u7701\u7565\u53f7\n    this.checkEllipse();\n  }\n\n  componentDidUpdate(prevProps) {\n    // \u5185\u5bb9\u533a\u57df\u6539\u52a8\u65f6\u5224\u65ad\u662f\u5426\u9700\u8981\u663e\u793a\u7701\u7565\u53f7\n    if (prevProps.children !== this.props.children) {\n      this.checkEllipse();\n    }\n  }\n\n  checkEllipse = () =&gt; {\n    let length = this.props.children.length;\n    let row = this.props.row || 1;\n\n    // \u6839\u636e\u884c\u9ad8\u83b7\u53d6\u663e\u793a\u533a\u57df\u7684\u6700\u5927\u9ad8\u5ea6\n    showHeight = parseFloat(window.getComputedStyle(this.eleHidden.current).lineHeight.split(&#39;px&#39;)[0]) * row;\n\n    this.setState({ textHidden: this.props.children }, () =&gt; {\n      // \u9690\u85cf\u533a\u57df\u7684\u9ad8\u5ea6\u5927\u4e8e\u6700\u5927\u9ad8\u5ea6\u7684\u8bdd\u5219\u9700\u8981\u663e\u793a\u7701\u7565\u53f7\n      if (this.eleHidden.current.offsetHeight &gt; showHeight) {\n        this.setState({ ellipse: true });\n        this.setEllipse(0, length);\n      } else {\n        this.setState({ ellipse: false, textShow: this.props.children });\n      }\n    });\n  };\n\n  // \u8ba1\u7b97\u622a\u53d6\u7684\u5b57\u7b26\u4e32\n  setEllipse = (end, sub) =&gt; {\n    const text = this.props.children;\n    const textHidden = text.substr(0, end + sub) + &#39;...&#39;; // \u5148\u628a\u7701\u7565\u53f7\u52a0\u8fdb\u9690\u85cf\u533a\u57df\u7684\u5b57\u7b26\u4e2d\u65b9\u4fbf\u8ba1\u7b97\n\n    this.setState({ textHidden }, () =&gt; {\n      // \u6587\u5b57\u8d85\u51fa\n      if (this.eleHidden.current.offsetHeight &gt; showHeight) {\n        let _end = end + sub;\n        let _sub = -parseInt(Math.abs(sub) / 2);\n\n        if (_sub === 0) _sub = -1;\n\n        // \u9012\u5f52\n        this.setEllipse(_end, _sub);\n      }\n\n      // \u6587\u5b57\u672a\u8d85\u51fa\n      else {\n        if (Math.abs(sub) === 1) {\n          this.setState({ textShow: textHidden });\n        } else {\n          let _end = end + sub;\n          let _sub = parseInt(Math.abs(sub) / 2);\n\n          if (_sub === 0) _sub = 1;\n\n          this.setEllipse(_end, _sub);\n        }\n      }\n    });\n  };\n\n  render() {\n    const { textHidden, textShow, ellipse } = this.state;\n    const { toolTip, children } = this.props;\n\n    return (\n      &lt;div className={styles.ellipse}&gt;\n        &lt;div className={styles.hidden} ref={this.eleHidden}&gt;\n          {textHidden}\n        &lt;/div&gt;\n\n        {ellipse &amp;&amp; toolTip ? (\n          &lt;Tooltip title={children}&gt;\n            &lt;div&gt;{textShow}&lt;/div&gt;\n          &lt;/Tooltip&gt;\n        ) : (\n          &lt;div&gt;{textShow}&lt;/div&gt;\n        )}\n      &lt;/div&gt;\n    );\n  }\n}\n\nexport default Ellipse;</code></pre> ';e.exports=t}}]);