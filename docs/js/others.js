(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["docs/js/others"],{LpY5:function(e,t){var o='<h1 id="\u6742\u9879">\u6742\u9879</h1> <h2 id="1-proxy">1 Proxy</h2> <h3 id="11-\u6982\u5ff5">1.1 \u6982\u5ff5</h3> <p>\u4e00\u4e2a Proxy \u5bf9\u8c61\u5305\u88c5\u53e6\u4e00\u4e2a\u5bf9\u8c61\u5e76\u62e6\u622a\u8bf8\u5982 \u8bfb\u53d6/\u5199\u5165 \u5c5e\u6027\u548c\u5176\u4ed6\u64cd\u4f5c\uff0c\u53ef\u4ee5\u9009\u62e9\u81ea\u884c\u5904\u7406\u5b83\u4eec\uff0c\u6216\u8005\u900f\u660e\u5730\u5141\u8bb8\u8be5\u5bf9\u8c61\u5904\u7406\u5b83\u4eec\u3002Proxy \u88ab\u7528\u4e8e\u4e86\u8bb8\u591a\u5e93\u548c\u67d0\u4e9b\u6d4f\u89c8\u5668\u6846\u67b6</p> <p><strong>\u8bed\u6cd5\uff1a</strong></p> <pre><code class="language-js">let proxy = new Proxy(target, handler);</code></pre> <ul> <li><code>target</code> \u2014\u2014 \u662f\u8981\u5305\u88c5\u7684\u5bf9\u8c61\uff0c\u53ef\u4ee5\u662f\u4efb\u4f55\u4e1c\u897f\uff0c\u5305\u62ec\u51fd\u6570</li> <li><code>handler</code> \u2014\u2014 \u4ee3\u7406\u914d\u7f6e\uff1a\u5e26\u6709\u6355\u6349\u5668\u7684\u5bf9\u8c61</li> </ul> <p>\u9996\u5148\uff0c\u521b\u5efa\u4e00\u4e2a\u6ca1\u6709\u4efb\u4f55\u6355\u6349\u5668\u7684\u4ee3\u7406 <code>Proxy</code>\uff1a</p> <pre><code class="language-js">let target = {};\nlet proxy = new Proxy(target, {}); // \u7a7a\u7684 handler \u5bf9\u8c61\n\nproxy.test = 5; // \u5199\u5165 proxy \u5bf9\u8c61\n\nalert(target.test); // 5\uff0ctest \u5c5e\u6027\u51fa\u73b0\u5728\u4e86 target \u4e2d\uff01\nalert(proxy.test); // 5\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u4ece proxy \u5bf9\u8c61\u8bfb\u53d6\u5b83\n\nfor (let key in proxy) alert(key); // test\uff0c\u8fed\u4ee3\u4e5f\u6b63\u5e38\u5de5\u4f5c</code></pre> <p>\u7531\u4e8e\u6ca1\u6709\u6355\u6349\u5668\uff0c\u6240\u6709\u5bf9 <code>proxy</code> \u7684\u64cd\u4f5c\u90fd\u76f4\u63a5\u8f6c\u53d1\u7ed9\u4e86 <code>target</code></p> <p>\u6ca1\u6709\u4efb\u4f55\u6355\u6349\u5668\uff0c<code>proxy</code> \u662f\u4e00\u4e2a <code>target</code> \u7684\u900f\u660e\u5305\u88c5\u5668</p> <blockquote> <p><code>Proxy</code> \u662f\u4e00\u79cd\u7279\u6b8a\u7684\u5bf9\u8c61\u3002<strong>\u5b83\u6ca1\u6709\u81ea\u5df1\u7684\u5c5e\u6027</strong>\u3002\u5982\u679c <code>handler</code> \u4e3a\u7a7a\uff0c\u5219\u900f\u660e\u5730\u5c06\u64cd\u4f5c\u8f6c\u53d1\u7ed9 <code>target</code></p> </blockquote> <p>\u5bf9\u4e8e\u5bf9\u8c61\u7684\u5927\u591a\u6570\u64cd\u4f5c\uff0cJavaScript \u89c4\u8303\u4e2d\u6709\u4e00\u4e2a\u6240\u8c13\u7684 \u201c\u5185\u90e8\u65b9\u6cd5\u201d\uff0c\u5b83\u63cf\u8ff0\u4e86\u6700\u5e95\u5c42\u7684\u5de5\u4f5c\u65b9\u5f0f\u3002\u4f8b\u5982 <code>[[Get]]</code>\uff0c\u7528\u4e8e\u8bfb\u53d6\u5c5e\u6027\u7684\u5185\u90e8\u65b9\u6cd5\uff0c<code>[[Set]]</code>\uff0c\u7528\u4e8e\u5199\u5165\u5c5e\u6027\u7684\u5185\u90e8\u65b9\u6cd5\uff0c\u7b49\u7b49\u3002</p> <blockquote> <p>\u8fd9\u4e9b\u65b9\u6cd5\u4ec5\u5728\u89c4\u8303\u4e2d\u4f7f\u7528\uff0c\u6211\u4eec\u4e0d\u80fd\u76f4\u63a5\u901a\u8fc7\u65b9\u6cd5\u540d\u8c03\u7528\u5b83\u4eec\u3002<code>Proxy</code> \u6355\u6349\u5668\u4f1a\u62e6\u622a\u8fd9\u4e9b\u65b9\u6cd5\u7684\u8c03\u7528</p> </blockquote> <p><strong>\u5185\u90e8\u65b9\u6cd5\u5bf9\u5e94\u7684\u6355\u6349\u5668\uff1a</strong></p> <table> <thead> <tr> <th>\u5185\u90e8\u65b9\u6cd5</th> <th>Handler \u65b9\u6cd5</th> <th>\u4f55\u65f6\u89e6\u53d1</th> </tr> </thead> <tbody><tr> <td><code>[[Get]]</code></td> <td><code>get</code></td> <td>\u8bfb\u53d6\u5c5e\u6027</td> </tr> <tr> <td><code>[[Set]]</code></td> <td><code>set</code></td> <td>\u5199\u5165\u5c5e\u6027</td> </tr> <tr> <td><code>[[HasProperty]]</code></td> <td><code>has</code></td> <td><code>in</code> \u64cd\u4f5c\u7b26</td> </tr> <tr> <td><code>[[Delete]]</code></td> <td><code>deleteProperty</code></td> <td><code>delete</code> \u64cd\u4f5c\u7b26</td> </tr> <tr> <td><code>[[Call]]</code></td> <td><code>apply</code></td> <td>\u51fd\u6570\u8c03\u7528</td> </tr> <tr> <td><code>[[Construct]]</code></td> <td><code>construct</code></td> <td><code>new</code> \u64cd\u4f5c\u7b26</td> </tr> <tr> <td><code>[[GetPrototypeOf]]</code></td> <td><code>getPrototypeOf</code></td> <td><code>Object.getPrototypeOf</code></td> </tr> <tr> <td><code>[[SetPrototypeOf]]</code></td> <td><code>setPrototypeOf</code></td> <td><code>Object.setPrototypeOf</code></td> </tr> <tr> <td><code>[[IsExtensible]]</code></td> <td><code>isExtensible</code></td> <td><code>Object.isExtensible</code></td> </tr> <tr> <td><code>[[PreventExtensions]]</code></td> <td><code>preventExtensions</code></td> <td><code>Object.preventExtensions</code></td> </tr> <tr> <td><code>[[DefineOwnProperty]]</code></td> <td><code>defineProperty</code></td> <td><code>Object.defineProperty</code>, <code>Object.defineProperties</code></td> </tr> <tr> <td><code>[[GetOwnProperty]]</code></td> <td><code>getOwnPropertyDescriptor</code></td> <td><code>Object.getOwnPropertyDescriptor</code>, <code>for..in</code>, <code>Object.keys/values/entries</code></td> </tr> <tr> <td><code>[[OwnPropertyKeys]]</code></td> <td><code>ownKeys</code></td> <td><code>Object.getOwnPropertyNames</code>, <code>Object.getOwnPropertySymbols</code>, <code>for..in</code>, <code>Object/keys/values/entries</code></td> </tr> </tbody></table> <p><strong>\u5185\u90e8\u65b9\u6cd5\u548c\u6355\u6349\u5668\u5fc5\u987b\u6ee1\u8db3\u7684\u6761\u4ef6\uff0c\u5176\u4e2d\u5927\u591a\u6570\u7528\u4e8e\u8fd4\u56de\u503c\uff1a</strong></p> <ul> <li><code>[[Set]]</code> \u5982\u679c\u503c\u5df2\u6210\u529f\u5199\u5165\uff0c\u5219\u5fc5\u987b\u8fd4\u56de true\uff0c\u5426\u5219\u8fd4\u56de false</li> <li><code>[[Delete]]</code> \u5982\u679c\u5df2\u6210\u529f\u5220\u9664\u8be5\u503c\uff0c\u5219\u5fc5\u987b\u8fd4\u56de true\uff0c\u5426\u5219\u8fd4\u56de false</li> <li>\u5e94\u7528\u4e8e\u4ee3\u7406\uff08proxy\uff09\u5bf9\u8c61\u7684 <code>[[GetPrototypeOf]]</code>\uff0c\u5fc5\u987b\u8fd4\u56de\u4e0e\u5e94\u7528\u4e8e\u88ab\u4ee3\u7406\u5bf9\u8c61\u7684 <code>[[GetPrototypeOf]]</code> \u76f8\u540c\u7684\u503c</li> </ul> <h3 id="12-get">1.2 get</h3> <p><strong>\u8bed\u6cd5\uff1a</strong></p> <pre><code class="language-js">get(target, property, receiver);</code></pre> <p><strong>\u53c2\u6570\uff1a</strong></p> <ul> <li><code>target</code> \u2014\u2014 \u662f\u76ee\u6807\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u88ab\u4f5c\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\u4f20\u9012\u7ed9 <code>new Proxy</code></li> <li><code>property</code> \u2014\u2014 \u76ee\u6807\u5c5e\u6027\u540d</li> <li><code>receiver</code> \u2014\u2014 \u5982\u679c\u76ee\u6807\u5c5e\u6027\u662f\u4e00\u4e2a <code>getter</code> \u8bbf\u95ee\u5668\u5c5e\u6027\uff0c\u5219 <code>receiver</code> \u5c31\u662f\u672c\u6b21\u8bfb\u53d6\u5c5e\u6027\u6240\u5728\u7684 <code>this</code> \u5bf9\u8c61\u3002\u901a\u5e38\u8fd9\u5c31\u662f <code>proxy</code> \u5bf9\u8c61\u672c\u8eab</li> </ul> <p><strong>\u521b\u5efa\u4e00\u4e2a\u5bf9\u4e0d\u5b58\u5728\u7684\u6570\u7ec4\u9879\u8fd4\u56de 0 \u7684\u6570\u7ec4\uff1a</strong></p> <pre><code class="language-js">let numbers = [0, 1, 2];\n\nnumbers = new Proxy(numbers, {\n  get(target, prop) {\n    if (prop in target) {\n      return target[prop];\n    } else {\n      return 0; // \u9ed8\u8ba4\u503c\n    }\n  }\n});\n\nalert(numbers[1]); // 1\nalert(numbers[123]); // 0\uff08\u6ca1\u6709\u8fd9\u4e2a\u6570\u7ec4\u9879\uff09</code></pre> <h3 id="13-set">1.3 set</h3> <p><strong>\u8bed\u6cd5\uff1a</strong></p> <pre><code class="language-js">set(target, property, value, receiver);</code></pre> <p><strong>\u53c2\u6570\uff1a</strong></p> <ul> <li><code>target</code> \u2014\u2014 \u662f\u76ee\u6807\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u88ab\u4f5c\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\u4f20\u9012\u7ed9 new Proxy\uff0c</li> <li><code>property</code> \u2014\u2014 \u76ee\u6807\u5c5e\u6027\u540d\u79f0\uff0c</li> <li><code>value</code> \u2014\u2014 \u76ee\u6807\u5c5e\u6027\u7684\u503c\uff0c</li> <li><code>receiver</code> \u2014\u2014 \u4e0e get \u6355\u6349\u5668\u7c7b\u4f3c\uff0c\u4ec5\u4e0e setter \u8bbf\u95ee\u5668\u5c5e\u6027\u76f8\u5173</li> </ul> <blockquote> <p>\u5982\u679c\u5199\u5165\u64cd\u4f5c\u6210\u529f\uff0c<code>set</code> \u6355\u6349\u5668\u5e94\u8be5\u8fd4\u56de <code>true</code>\uff0c\u5426\u5219\u8fd4\u56de <code>false</code>\uff08\u89e6\u53d1 TypeError\uff09</p> </blockquote> <p><strong>\u4e13\u95e8\u7528\u4e8e\u6570\u5b57\u7684\u6570\u7ec4\uff1a</strong></p> <pre><code class="language-js">let numbers = [];\n\nnumbers = new Proxy(numbers, {\n  // (\\*)\n  set(target, prop, val) {\n    // \u62e6\u622a\u5199\u5165\u5c5e\u6027\u64cd\u4f5c\n    if (typeof val == &#39;number&#39;) {\n      target[prop] = val;\n      return true;\n    } else {\n      return false;\n    }\n  }\n});\n\nnumbers.push(1); // \u6dfb\u52a0\u6210\u529f\nnumbers.push(2); // \u6dfb\u52a0\u6210\u529f\nalert(&#39;Length is: &#39; + numbers.length); // 2\n\nnumbers.push(&#39;test&#39;); // TypeError\uff08proxy \u7684 &#39;set&#39; \u8fd4\u56de false\uff09</code></pre> <h3 id="14-ownkeys-\u548c-getownpropertydescriptor">1.4 ownKeys \u548c getOwnPropertyDescriptor</h3> <p><code>Object.keys</code>\uff0c<code>for..in</code> \u5faa\u73af\u548c\u5927\u591a\u6570\u5176\u4ed6\u904d\u5386\u5bf9\u8c61\u5c5e\u6027\u7684\u65b9\u6cd5\u90fd\u4f7f\u7528\u5185\u90e8\u65b9\u6cd5 <code>[[OwnPropertyKeys]]</code>\uff08\u7531 ownKeys \u6355\u6349\u5668\u62e6\u622a) \u6765\u83b7\u53d6\u5c5e\u6027\u5217\u8868\u3002</p> <p>\u8fd9\u4e9b\u65b9\u6cd5\u5728\u7ec6\u8282\u4e0a\u6709\u6240\u4e0d\u540c\uff1a</p> <ul> <li><code>Object.getOwnPropertyNames(obj)</code> \u8fd4\u56de\u975e <code>Symbol</code> \u952e</li> <li><code>Object.getOwnPropertySymbols(obj)</code> \u8fd4\u56de <code>Symbol</code> \u952e</li> <li><code>Object.keys/values()</code> \u8fd4\u56de\u5e26\u6709 <code>enumerable</code> \u6807\u5fd7\u7684\u975e <code>Symbol</code> \u952e/\u503c</li> <li><code>for..in</code> \u5faa\u73af\u904d\u5386\u6240\u6709\u5e26\u6709 <code>enumerable</code> \u6807\u5fd7\u7684\u975e <code>Symbol</code> \u952e\uff0c\u4ee5\u53ca\u539f\u578b\u5bf9\u8c61\u7684\u952e</li> </ul> <p><strong>\u793a\u4f8b\uff0c\u4f7f\u7528 <code>ownKeys</code> \u6355\u6349\u5668\u62e6\u622a <code>for..in</code> \u5bf9 <code>user</code> \u7684\u904d\u5386\uff0c\u5e76\u4f7f\u7528 <code>Object.keys</code> \u548c <code>Object.values</code> \u6765\u8df3\u8fc7\u4ee5\u4e0b\u5212\u7ebf <code>_</code> \u5f00\u5934\u7684\u5c5e\u6027\uff1a</strong></p> <pre><code class="language-js">let user = {\n  name: &#39;John&#39;,\n  age: 30,\n  _password: &#39;***&#39;\n};\n\nuser = new Proxy(user, {\n  ownKeys(target) {\n    return Object.keys(target).filter(key =&gt; !key.startsWith(&#39;_&#39;));\n  }\n});\n\n// &quot;ownKeys&quot; \u8fc7\u6ee4\u6389\u4e86 _password\nfor (let key in user) alert(key); // name\uff0c\u7136\u540e\u662f age\n\n// \u5bf9\u8fd9\u4e9b\u65b9\u6cd5\u7684\u6548\u679c\u76f8\u540c\uff1a\nalert(Object.keys(user)); // name,age\nalert(Object.values(user)); // John,30</code></pre> <h3 id="15-has">1.5 has</h3> <p><code>has</code> \u6355\u6349\u5668\u4f1a\u62e6\u622a <code>in</code> \u8c03\u7528</p> <pre><code class="language-js">has(target, property);</code></pre> <ul> <li><code>target</code> \u2014\u2014 \u662f\u76ee\u6807\u5bf9\u8c61\uff0c\u88ab\u4f5c\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\u4f20\u9012\u7ed9 <code>new Proxy</code></li> <li><code>property</code> \u2014\u2014 \u5c5e\u6027\u540d\u79f0</li> </ul> <p>\u6709\u4e00\u4e2a <code>range</code> \u5bf9\u8c61\uff0c\u60f3\u4f7f\u7528 <code>in</code> \u64cd\u4f5c\u7b26\u6765\u68c0\u67e5\u4e00\u4e2a\u6570\u5b57\u662f\u5426\u5728 <code>range</code> \u8303\u56f4\u5185\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code class="language-js">let range = {\n  start: 1,\n  end: 10\n};\n\nrange = new Proxy(range, {\n  has(target, prop) {\n    return prop &gt;= target.start &amp;&amp; prop &lt;= target.end;\n  }\n});\n\nalert(5 in range); // true\nalert(50 in range); // false</code></pre> <h3 id="16-apply">1.6 apply</h3> <p><strong><code>apply(target, thisArg, args)</code> \u6355\u6349\u5668\u80fd\u4f7f\u4ee3\u7406\u4ee5\u51fd\u6570\u7684\u65b9\u5f0f\u88ab\u8c03\u7528\uff1a</strong></p> <ul> <li><code>target</code> \u662f\u76ee\u6807\u5bf9\u8c61\uff08\u5728 JavaScript \u4e2d\uff0c\u51fd\u6570\u5c31\u662f\u4e00\u4e2a\u5bf9\u8c61\uff09</li> <li><code>thisArg</code> \u662f <code>this</code> \u7684\u503c</li> <li><code>args</code> \u662f\u53c2\u6570\u5217\u8868</li> </ul> <pre><code class="language-js">function delay(f, ms) {\n  return new Proxy(f, {\n    apply(target, thisArg, args) {\n      setTimeout(() =&gt; target.apply(thisArg, args), ms);\n    }\n  });\n}\n\nfunction sayHi(user) {\n  alert(`Hello, ${user}!`);\n}\n\nsayHi = delay(sayHi, 3000);\n\nalert(sayHi.length); // 1 proxy \u5c06\u201c\u83b7\u53d6 length\u201d\u7684\u64cd\u4f5c\u8f6c\u53d1\u7ed9\u76ee\u6807\u5bf9\u8c61\n\nsayHi(&#39;John&#39;); // Hello, John!\uff083 \u79d2\u540e\uff09</code></pre> <h2 id="2-reflect">2 Reflect</h2> <h3 id="21-\u6982\u5ff5">2.1 \u6982\u5ff5</h3> <p><code>Reflect</code> \u662f\u4e00\u4e2a\u5185\u5efa\u5bf9\u8c61\uff0c\u53ef\u7b80\u5316 Proxy \u7684\u521b\u5efa</p> <p>\u524d\u9762\u6240\u8bb2\u8fc7\u7684\u5185\u90e8\u65b9\u6cd5\uff0c\u4f8b\u5982 <code>[[Get]]</code> \u548c <code>[[Set]]</code> \u7b49\uff0c\u90fd\u53ea\u662f\u89c4\u8303\u6027\u7684\uff0c\u4e0d\u80fd\u76f4\u63a5\u8c03\u7528</p> <p><code>Reflect</code> \u5bf9\u8c61\u4f7f\u8c03\u7528\u8fd9\u4e9b\u5185\u90e8\u65b9\u6cd5\u6210\u4e3a\u4e86\u53ef\u80fd\u3002\u5b83\u7684\u65b9\u6cd5\u662f\u5185\u90e8\u65b9\u6cd5\u7684\u6700\u5c0f\u5305\u88c5</p> <table> <thead> <tr> <th>\u64cd\u4f5c</th> <th>Reflect \u8c03\u7528</th> <th>\u5185\u90e8\u65b9\u6cd5</th> </tr> </thead> <tbody><tr> <td><code>obj[prop]</code></td> <td><code>Reflect.get(obj, prop)</code></td> <td><code>[[Get]]</code></td> </tr> <tr> <td><code>obj[prop] = value</code></td> <td><code>Reflect.set(obj, prop, value)</code></td> <td><code>[[Set]]</code></td> </tr> <tr> <td><code>delete obj[prop]</code></td> <td><code>Reflect.deleteProperty(obj, prop)</code></td> <td><code>[[Delete]]</code></td> </tr> <tr> <td><code>new F(value)</code></td> <td><code>Reflect.construct(F, value)</code></td> <td><code>[[Construct]]</code></td> </tr> <tr> <td>\u2026</td> <td>\u2026</td> <td>\u2026</td> </tr> </tbody></table> <p><strong>\u4f8b\u5982\uff1a</strong></p> <pre><code class="language-js">let user = {};\n\nReflect.set(user, &#39;name&#39;, &#39;John&#39;);\n\nalert(user.name); // John</code></pre> <p>\u5bf9\u4e8e\u6bcf\u4e2a\u53ef\u88ab <code>Proxy</code> \u6355\u83b7\u7684\u5185\u90e8\u65b9\u6cd5\uff0c\u5728 <code>Reflect</code> \u4e2d\u90fd\u6709\u4e00\u4e2a\u5bf9\u5e94\u7684\u65b9\u6cd5\uff0c\u5176\u540d\u79f0\u548c\u53c2\u6570\u4e0e <code>Proxy</code> \u6355\u6349\u5668\u76f8\u540c</p> <p><strong>\u793a\u4f8b\uff0c\u6355\u6349\u5668 get \u548c set \u5747\u900f\u660e\u5730\u5c06 \u8bfb\u53d6/\u5199\u5165 \u64cd\u4f5c\u8f6c\u53d1\u5230\u5bf9\u8c61\uff0c\u5e76\u663e\u793a\u4e00\u6761\u6d88\u606f\uff1a</strong></p> <pre><code class="language-js">let user = {\n  name: &#39;John&#39;\n};\n\nuser = new Proxy(user, {\n  get(target, prop, receiver) {\n    alert(`GET ${prop}`);\n    return Reflect.get(target, prop, receiver);\n  },\n  set(target, prop, val, receiver) {\n    alert(`SET ${prop}=${val}`);\n    return Reflect.set(target, prop, val, receiver);\n  }\n});\n\nlet name = user.name; // \u663e\u793a &quot;GET name&quot;\nuser.name = &#39;Pete&#39;; // \u663e\u793a &quot;SET name=Pete&quot;</code></pre> <p>\u5982\u679c\u4e00\u4e2a\u6355\u6349\u5668\u60f3\u8981\u5c06\u8c03\u7528\u8f6c\u53d1\u7ed9\u5bf9\u8c61\uff0c\u5219\u53ea\u9700\u4f7f\u7528\u76f8\u540c\u7684\u53c2\u6570\u8c03\u7528 <code>Reflect.&lt;method&gt;</code> \u5c31\u8db3\u591f\u4e86\u3002</p> <h3 id="22-\u4ee3\u7406\u4e00\u4e2a-getter">2.2 \u4ee3\u7406\u4e00\u4e2a getter</h3> <p><strong>\u5b9e\u4f8b\uff1a\u4e3a\u4ec0\u4e48 <code>Reflect.get</code> \u66f4\u597d\uff0c\u4e3a\u4ec0\u4e48 <code>get/set</code> \u6709\u7b2c\u4e09\u4e2a\u53c2\u6570 <code>receiver</code></strong></p> <pre><code class="language-js">let user = {\n  _name: &#39;Guest&#39;,\n  get name() {\n    return this._name;\n  }\n};\n\nlet userProxy = new Proxy(user, {\n  get(target, prop, receiver) {\n    return target[prop];\n  }\n});\n\nalert(userProxy.name); // Guest</code></pre> <p>\u53e6\u4e00\u4e2a\u5bf9\u8c61 <code>admin</code> \u4ece <code>user</code> \u7ee7\u627f\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u89c2\u5bdf\u5230\u9519\u8bef\u7684\u884c\u4e3a\uff1a</p> <pre><code class="language-js">let user = {\n  _name: &#39;Guest&#39;,\n  get name() {\n    return this._name;\n  }\n};\n\nlet userProxy = new Proxy(user, {\n  get(target, prop, receiver) {\n    return target[prop]; // target = user\n  }\n});\n\nlet admin = {\n  __proto__: userProxy,\n  _name: &#39;Admin&#39;\n};\n\n// \u671f\u671b\u8f93\u51fa\uff1aAdmin\nalert(admin.name); // \u8f93\u51fa\uff1aGuest</code></pre> <p>\u8bfb\u53d6 <code>admin.name</code> \u5e94\u8be5\u8fd4\u56de &quot;Admin&quot;\uff0c\u800c\u4e0d\u662f &quot;Guest&quot;</p> <p>\u95ee\u9898\u5b9e\u9645\u4e0a\u51fa\u5728\u4ee3\u7406\u4e2d\u3002\u5f53\u6211\u4eec\u8bfb\u53d6 <code>admin.name</code> \u65f6\uff0c\u7531\u4e8e <code>admin</code> \u5bf9\u8c61\u81ea\u8eab\u6ca1\u6709\u5bf9\u5e94\u7684\u7684\u5c5e\u6027\uff0c\u641c\u7d22\u5c06\u8f6c\u5230\u5176\u539f\u578b\uff0c\u539f\u578b\u662f <code>userProxy</code></p> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u9700\u8981\u7b2c\u4e09\u4e2a\u53c2\u6570 <code>receiver</code>\u3002\u5b83\u4fdd\u8bc1\u5c06\u6b63\u786e\u7684 <code>this</code> \u4f20\u9012\u7ed9 <code>getter</code></p> <p>\u5982\u4f55\u628a\u4e0a\u4e0b\u6587\u4f20\u9012\u7ed9 <code>getter</code>\uff1f\u5bf9\u4e8e\u4e00\u4e2a\u5e38\u89c4\u51fd\u6570\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>call/apply</code>\uff0c\u4f46\u8fd9\u662f\u4e00\u4e2a <code>getter</code>\uff0c\u5b83\u4e0d\u80fd\u88ab\u8c03\u7528\u53ea\u80fd\u88ab\u8bbf\u95ee</p> <p><strong><code>Reflect.get</code> \u53ef\u4ee5\u505a\u5230\uff1a</strong></p> <pre><code class="language-js">let user = {\n  _name: &#39;Guest&#39;,\n  get name() {\n    return this._name;\n  }\n};\n\nlet userProxy = new Proxy(user, {\n  get(target, prop, receiver) {\n    // receiver = admin\n    return Reflect.get(target, prop, receiver);\n  }\n});\n\nlet admin = {\n  __proto__: userProxy,\n  _name: &#39;Admin&#39;\n};\n\nalert(admin.name); // Admin</code></pre> <h3 id="23-proxy-\u7684\u5c40\u9650\u6027">2.3 Proxy \u7684\u5c40\u9650\u6027</h3> <p>todo</p> <h3 id="24-\u79c1\u6709\u5b57\u6bb5">2.4 \u79c1\u6709\u5b57\u6bb5</h3> <p>todo</p> <h2 id="3-eval\uff1a\u6267\u884c\u4ee3\u7801\u5b57\u7b26\u4e32">3 Eval\uff1a\u6267\u884c\u4ee3\u7801\u5b57\u7b26\u4e32</h2> <pre><code class="language-js">let value = eval(&#39;1+1&#39;);\nalert(value); // 2</code></pre> <p>\u8c03\u7528 <code>eval(code)</code> \u4f1a\u8fd0\u884c\u4ee3\u7801\u5b57\u7b26\u4e32\uff0c\u5e76\u8fd4\u56de\u6700\u540e\u4e00\u6761\u8bed\u53e5\u7684\u7ed3\u679c</p> <ul> <li>\u5728\u73b0\u4ee3 <code>JavaScript</code> \u7f16\u7a0b\u4e2d\uff0c\u5f88\u5c11\u4f7f\u7528\u5b83\uff0c\u901a\u5e38\u4e5f\u4e0d\u9700\u8981\u4f7f\u7528\u5b83</li> <li>\u53ef\u4ee5\u8bbf\u95ee\u5916\u90e8\u5c40\u90e8\u53d8\u91cf\u3002\u8fd9\u88ab\u8ba4\u4e3a\u662f\u4e00\u4e2a\u4e0d\u597d\u7684\u7f16\u7a0b\u4e60\u60ef</li> <li>\u8981\u5728\u5168\u5c40\u4f5c\u7528\u57df\u4e2d <code>eval</code> \u4ee3\u7801\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>window.eval(code)</code> \u8fdb\u884c\u66ff\u4ee3</li> <li>\u6b64\u5916\uff0c\u5982\u679c\u4f60\u7684\u4ee3\u7801\u9700\u8981\u4ece\u5916\u90e8\u4f5c\u7528\u57df\u83b7\u53d6\u6570\u636e\uff0c\u8bf7\u4f7f\u7528 <code>new Function</code>\uff0c\u5e76\u5c06\u6570\u636e\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9\u51fd\u6570</li> </ul> <h2 id="4-\u67ef\u91cc\u5316\uff08currying\uff09">4 \u67ef\u91cc\u5316\uff08Currying\uff09</h2> <h3 id="41-\u6982\u5ff5">4.1 \u6982\u5ff5</h3> <p>\u67ef\u91cc\u5316\u662f\u4e00\u79cd\u51fd\u6570\u7684\u8f6c\u6362\uff0c\u5b83\u662f\u6307\u5c06\u4e00\u4e2a\u51fd\u6570\u4ece\u53ef\u8c03\u7528\u7684 <code>f(a, b, c)</code> \u8f6c\u6362\u4e3a\u53ef\u8c03\u7528\u7684 <code>f(a)(b)(c)</code></p> <p>\u67ef\u91cc\u5316\u4e0d\u4f1a\u8c03\u7528\u51fd\u6570\u3002\u5b83\u53ea\u662f\u5bf9\u51fd\u6570\u8fdb\u884c\u8f6c\u6362</p> <pre><code class="language-js">function curry(f) {\n  // curry(f) \u6267\u884c\u67ef\u91cc\u5316\u8f6c\u6362\n  return function(a) {\n    return function(b) {\n      return f(a, b);\n    };\n  };\n}\n\n// \u7528\u6cd5\nfunction sum(a, b) {\n  return a + b;\n}\n\nlet curriedSum = curry(sum);\n\nalert(curriedSum(1)(2)); // 3</code></pre> <h3 id="42-\u9ad8\u7ea7\u67ef\u91cc\u5316">4.2 \u9ad8\u7ea7\u67ef\u91cc\u5316</h3> <blockquote> <p>\u53ea\u5141\u8bb8\u786e\u5b9a\u53c2\u6570\u957f\u5ea6\u7684\u51fd\u6570\uff0c\u4f7f\u7528 <code>rest</code> \u53c2\u6570\u7684\u51fd\u6570\uff0c\u4f8b\u5982 <code>f(...args)</code>\uff0c\u4e0d\u80fd\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u8fdb\u884c\u67ef\u91cc\u5316</p> </blockquote> <pre><code class="language-js">function curry(func) {\n  return function curried(...args) {\n    if (args.length &gt;= func.length) {\n      return func.apply(this, args);\n    } else {\n      return function(...args2) {\n        return curried.apply(this, args.concat(args2));\n      };\n    }\n  };\n}</code></pre> <p>\u7528\u4f8b\uff1a</p> <pre><code class="language-js">function sum(a, b, c) {\n  return a + b + c;\n}\n\nlet curriedSum = curry(sum);\n\nalert(curriedSum(1, 2, 3)); // 6\uff0c\u4ecd\u7136\u53ef\u4ee5\u88ab\u6b63\u5e38\u8c03\u7528\nalert(curriedSum(1)(2, 3)); // 6\uff0c\u5bf9\u7b2c\u4e00\u4e2a\u53c2\u6570\u7684\u67ef\u91cc\u5316\nalert(curriedSum(1)(2)(3)); // 6\uff0c\u5168\u67ef\u91cc\u5316</code></pre> <h3 id="43-\u67ef\u91cc\u5316\u7684\u4f5c\u7528">4.3 \u67ef\u91cc\u5316\u7684\u4f5c\u7528</h3> <p>\u53ef\u4ee5\u8f7b\u677e\u751f\u6210\u504f\u51fd\u6570\uff0c(\u7ed1\u5b9a\u4e86\u56fa\u5b9a\u53c2\u6570\u7684\u51fd\u6570)</p> <pre><code class="language-js">function sum(a, b) {\n  return a + b;\n}\n\nlet curriedSum = curry(sum);\nlet sum5 = curriedSum(5); // \u521b\u5efa\u504f\u51fd\u6570\n\nconsole.log(sum5(2)); // \u8f93\u51fa 5+2\nconsole.log(sum5(3)); // \u8f93\u51fa 5+3</code></pre> <h3 id="44-\u65e0\u9650\u7d2f\u52a0">4.4 \u65e0\u9650\u7d2f\u52a0</h3> <p>\u5b9e\u73b0\u4e00\u4e2a sum \u65b9\u6cd5</p> <pre><code class="language-js">sum(1, 2, 3) == 6;\nsum(1)(2, 3) == 6;\nsum(1)(2,3)...(x) == 1 + 2 + 3 + ... + x</code></pre> <pre><code class="language-js">function add(...args) {\n  let sum = 0;\n\n  for (let i = 0; i &lt; args.length; i++) {\n    sum = sum + args[i];\n  }\n\n  return sum;\n}\n\nfunction currying(fn) {\n  let sum = 0;\n\n  let curringFn = function(...args) {\n    let val = fn(...args);\n    sum += val;\n    return curringFn;\n  };\n\n  curringFn.toString = function() {\n    return sum;\n  };\n\n  return curringFn;\n}\n\nlet sum = currying(add);\n\nconsole.log(sum(1)(2)(3)(4, 5).toString());</code></pre> <h2 id="5-reference-type">5 Reference Type</h2> <p>Reference Type \u89e3\u91ca this \u4e22\u5931\u95ee\u9898</p> <pre><code class="language-js">let user = {\n  name: &#39;John&#39;,\n  hi() {\n    alert(this.name);\n  }\n};\n\n// \u628a\u83b7\u53d6\u65b9\u6cd5\u548c\u8c03\u7528\u65b9\u6cd5\u62c6\u6210\u4e24\u884c\nlet hi = user.hi;\nhi(); // \u62a5\u9519\u4e86\uff0c\u56e0\u4e3a this \u7684\u503c\u662f undefined</code></pre> <p><code>Reference Type</code> \u7684\u503c\u662f\u4e00\u4e2a\u4e09\u4e2a\u503c\u7684\u7ec4\u5408 <code>(base, name, strict)</code>\uff0c\u5176\u4e2d\uff1a</p> <ul> <li><code>base</code> \u662f\u5bf9\u8c61</li> <li><code>name</code> \u662f\u5c5e\u6027\u540d</li> <li><code>strict</code> \u5728 <code>use strict</code> \u6a21\u5f0f\u4e0b\u4e3a <code>true</code></li> </ul> <p>\u5bf9\u5c5e\u6027 <code>user.hi</code> \u8bbf\u95ee\u7684\u7ed3\u679c\u4e0d\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u800c\u662f\u4e00\u4e2a <code>Reference Type</code> \u7684\u503c</p> <p>\u4efb\u4f55\u4f8b\u5982\u8d4b\u503c <code>hi = user.hi</code> \u7b49\u5176\u4ed6\u7684\u64cd\u4f5c\uff0c\u90fd\u4f1a\u5c06 <code>Reference Type</code> \u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u4e22\u5f03\u6389\uff0c\u800c\u4f1a\u53d6 <code>user.hi</code>\uff08\u4e00\u4e2a\u51fd\u6570\uff09\u7684\u503c\u5e76\u7ee7\u7eed\u4f20\u9012\u3002\u6240\u4ee5\u4efb\u4f55\u540e\u7eed\u64cd\u4f5c\u90fd\u201c\u4e22\u5931\u201d\u4e86 <code>this</code></p> <p>\u56e0\u6b64\uff0c<code>this</code> \u7684\u503c\u4ec5\u5728\u51fd\u6570\u76f4\u63a5\u88ab\u901a\u8fc7\u70b9\u7b26\u53f7 <code>obj.method()</code> \u6216\u65b9\u62ec\u53f7 <code>obj[&#39;method&#39;]()</code> \u8bed\u6cd5\uff08\u6b64\u5904\u5b83\u4eec\u4f5c\u7528\u76f8\u540c\uff09\u8c03\u7528\u65f6\u624d\u88ab\u6b63\u786e\u4f20\u9012</p> <h2 id="5-bigint">5 BigInt</h2> <p><code>BigInt</code> \u662f\u4e00\u79cd\u7279\u6b8a\u7684\u6570\u5b57\u7c7b\u578b\uff0c\u5b83\u63d0\u4f9b\u4e86\u5bf9\u4efb\u610f\u957f\u5ea6\u6574\u6570\u7684\u652f\u6301</p> <p><strong>\u521b\u5efa <code>bigint</code> \u7684\u65b9\u5f0f\u6709\u4e24\u79cd</strong>\uff1a\u5728\u4e00\u4e2a\u6574\u6570\u5b57\u9762\u91cf\u540e\u9762\u52a0 <code>n</code> \u6216\u8005\u8c03\u7528 <code>BigInt</code> \u51fd\u6570\uff0c\u8be5\u51fd\u6570\u4ece\u5b57\u7b26\u4e32\u3001\u6570\u5b57\u7b49\u4e2d\u751f\u6210 <code>bigint</code></p> <pre><code class="language-js">const bigint = 1234567890123456789012345678901234567890n;\n\nconst sameBigint = BigInt(&#39;1234567890123456789012345678901234567890&#39;);\n\nconst bigintFromNumber = BigInt(10); // \u4e0e 10n \u76f8\u540c</code></pre> <h3 id="51-\u6570\u5b66\u8fd0\u7b97\u7b26">5.1 \u6570\u5b66\u8fd0\u7b97\u7b26</h3> <p>BigInt \u5927\u591a\u6570\u60c5\u51b5\u4e0b\u53ef\u4ee5\u50cf\u5e38\u89c4\u6570\u5b57\u7c7b\u578b\u4e00\u6837\u4f7f\u7528\uff0c\u4f8b\u5982\uff1a</p> <pre><code class="language-js">alert(1n + 2n); // 3\n\nalert(5n / 2n); // 2</code></pre> <blockquote> <p><strong>\u6ce8\u610f\uff1a</strong>\u9664\u6cd5 <code>5/2</code> \u7684\u7ed3\u679c\u5411\u96f6\u8fdb\u884c\u820d\u5165\uff0c\u820d\u5165\u540e\u5f97\u5230\u7684\u7ed3\u679c\u6ca1\u6709\u4e86\u5c0f\u6570\u90e8\u5206\u3002\u5bf9 bigint \u7684\u6240\u6709\u64cd\u4f5c\uff0c\u8fd4\u56de\u7684\u7ed3\u679c\u4e5f\u662f bigint</p> </blockquote> <p><strong>\u4e0d\u53ef\u4ee5\u628a bigint \u548c\u5e38\u89c4\u6570\u5b57\u7c7b\u578b\u6df7\u5408\u4f7f\u7528\uff1a</strong></p> <pre><code class="language-js">alert(1n + 2); // Error: Cannot mix BigInt and other types</code></pre> <pre><code class="language-js">let bigint = 1n;\nlet number = 2;\n\n// \u5c06 number \u8f6c\u6362\u4e3a bigint\nalert(bigint + BigInt(number)); // 3\n\n// \u5c06 bigint \u8f6c\u6362\u4e3a number\nalert(Number(bigint) + number); // 3</code></pre> <blockquote> <p>\u5982\u679c bigint \u592a\u5927\u800c\u6570\u5b57\u7c7b\u578b\u65e0\u6cd5\u5bb9\u7eb3\uff0c\u5219\u4f1a\u622a\u65ad\u591a\u4f59\u7684\u4f4d\uff0c\u56e0\u6b64\u6211\u4eec\u5e94\u8be5\u8c28\u614e\u8fdb\u884c\u6b64\u7c7b\u8f6c\u6362</p> </blockquote> <p><strong>BigInt \u4e0d\u652f\u6301\u4e00\u5143\u52a0\u6cd5\uff1a</strong></p> <pre><code class="language-js">let bigint = 1n;\n\nalert(+bigint); // error</code></pre> <h3 id="52-\u6bd4\u8f83\u8fd0\u7b97\u7b26">5.2 \u6bd4\u8f83\u8fd0\u7b97\u7b26</h3> <p>\u6bd4\u8f83\u8fd0\u7b97\u7b26\uff0c\u4f8b\u5982 <code>&lt;</code> \u548c <code>&gt;</code>\uff0c\u4f7f\u7528\u5b83\u4eec\u6765\u5bf9 <code>bigint</code> \u548c <code>number</code> \u7c7b\u578b\u7684\u6570\u5b57\u8fdb\u884c\u6bd4\u8f83\u6ca1\u6709\u95ee\u9898\uff1a</p> <pre><code class="language-js">alert(2n &gt; 1n); // true\n\nalert(2n &gt; 1); // true</code></pre> <blockquote> <p>\u6ce8\u610f\uff0c\u7531\u4e8e <code>number</code> \u548c <code>bigint</code> \u5c5e\u4e8e\u4e0d\u540c\u7c7b\u578b\uff0c\u5b83\u4eec\u53ef\u80fd\u5728\u8fdb\u884c <code>==</code> \u6bd4\u8f83\u65f6\u76f8\u7b49\uff0c\u4f46\u5728\u8fdb\u884c <code>===</code>\u6bd4\u8f83\u65f6\u4e0d\u76f8\u7b49\uff1a</p> </blockquote> <pre><code class="language-js">alert(1 == 1n); // true\n\nalert(1 === 1n); // false</code></pre> <h3 id="53-\u5e03\u5c14\u8fd0\u7b97">5.3 \u5e03\u5c14\u8fd0\u7b97</h3> <p>\u5f53\u5728 <code>if</code> \u6216\u5176\u4ed6\u5e03\u5c14\u8fd0\u7b97\u4e2d\u65f6\uff0c<code>bigint</code> \u7684\u884c\u4e3a\u7c7b\u4f3c\u4e8e <code>number</code></p> <p>\u4f8b\u5982\uff0c\u5728 <code>if</code> \u4e2d\uff0c<code>bigint 0n</code> \u4e3a\u5047\uff0c\u5176\u4ed6\u503c\u4e3a <code>true</code></p> ';e.exports=o}}]);