(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["docs/interview/javascript"],{"4ZNl":function(e,o){var n='<h1 id="javascript">JavaScript</h1> <h2 id="1-\u539f\u578b\u94fe">1 \u539f\u578b\u94fe</h2> <h3 id="11-\u4ec0\u4e48\u662f\u539f\u578b">1.1 \u4ec0\u4e48\u662f\u539f\u578b</h3> <ul> <li>\u6bcf\u4e00\u4e2a JavaScript \u5bf9\u8c61\u4f1a\u6709\u4e00\u4e2a\u7279\u6b8a\u7684\u9690\u85cf\u5c5e\u6027 <code>[[Prototype]]</code>\uff0c\u8be5\u5bf9\u8c61\u88ab\u79f0\u4e3a\u201c\u539f\u578b\u201d\uff0c\u6bcf\u4e00\u4e2a\u5bf9\u8c61\u90fd\u4f1a\u4ece\u539f\u578b&quot;\u7ee7\u627f&quot;\u5c5e\u6027</li> <li><code>__proto__</code> \u662f <code>[[Prototype]]</code> \u7684\u56e0\u5386\u53f2\u539f\u56e0\u800c\u7559\u4e0b\u6765\u7684 <code>getter/setter</code></li> <li><code>F.prototype</code> \u5c5e\u6027\u4ec5\u5728 <code>new F</code> \u88ab\u8c03\u7528\u65f6\u4f7f\u7528\uff0c\u5b83\u4e3a\u65b0\u5bf9\u8c61\u7684 <code>[[Prototype]]</code> \u8d4b\u503c</li> <li>\u5f53\u8bfb\u53d6\u5b9e\u4f8b\u7684\u5c5e\u6027\u65f6\uff0c\u5982\u679c\u627e\u4e0d\u5230\uff0c\u5c31\u4f1a\u67e5\u627e\u4e0e\u5bf9\u8c61\u5173\u8054\u7684\u539f\u578b\u4e2d\u7684\u5c5e\u6027\uff0c\u5982\u679c\u8fd8\u67e5\u4e0d\u5230\uff0c\u5c31\u53bb\u627e\u539f\u578b\u7684\u539f\u578b\uff0c\u4e00\u76f4\u627e\u5230\u6700\u9876\u5c42\u4e3a\u6b62</li> </ul> <pre><code class="language-js">function Person() {}\n\nlet p = new Person();\n\nconsole.log(Person.prototype.constructor === Person); // true\nconsole.log(p.__proto__ === Person.prototype); // true</code></pre> <h3 id="12-\u4ec0\u4e48\u662f\u539f\u578b\u94fe">1.2 \u4ec0\u4e48\u662f\u539f\u578b\u94fe</h3> <ul> <li>\u6bcf\u4e00\u4e2a JavaScript \u5bf9\u8c61\u4f1a\u6709\u4e00\u4e2a\u7279\u6b8a\u7684\u9690\u85cf\u5c5e\u6027 <code>[[Prototype]]</code>\uff0c\u8be5\u5bf9\u8c61\u88ab\u79f0\u4e3a\u201c\u539f\u578b\u201d</li> <li>\u800c\u539f\u578b\u4e5f\u6709\u5b83\u81ea\u5df1\u7684\u539f\u578b</li> <li>\u539f\u578b\u7684\u539f\u578b\u8fd9\u6761\u5173\u7cfb\u94fe\uff0c\u5c31\u53eb\u539f\u578b\u94fe</li> </ul> <pre><code class="language-js">// \u4f8b\u5982\u4e00\u4e2a\u6570\u7ec4\u5b9e\u4f8b\nlet arr = [];\n\narr.__proto__ === Array.prototype;\n\n// \u800c\u4e14\nArray.prototype.__proto__ === Object.prototype;\n\n// \u6240\u4ee5\narr.__proto__.__proto__ === Object.prototype;</code></pre> <h3 id="\u9898\u76ee\uff1a\u89e3\u91ca\u4e00\u4e0b\u539f\u578b\u94fe">\u9898\u76ee\uff1a\u89e3\u91ca\u4e00\u4e0b\u539f\u578b\u94fe</h3> <h2 id="2-\u7ee7\u627f">2 \u7ee7\u627f</h2> <h3 id="21-\u7ec4\u5408\u5f0f\u7ee7\u627f">2.1 \u7ec4\u5408\u5f0f\u7ee7\u627f</h3> <pre><code class="language-js">function Parent(name) {\n  this.name = name;\n  this.colors = [&#39;red&#39;, &#39;blue&#39;, &#39;green&#39;];\n}\n\nParent.prototype.getName = function() {\n  console.log(this.name);\n};\n\nfunction Child(name, age) {\n  Parent.call(this, name);\n\n  this.age = age;\n}\n\nChild.prototype = new Parent();\nChild.prototype.constructor = Child;\n\nvar child1 = new Child(&#39;kevin&#39;, &#39;18&#39;);\n\nconsole.log(child1);</code></pre> <p><strong>\u7ec4\u5408\u7ee7\u627f\u6700\u5927\u7684\u7f3a\u70b9\u662f\u4f1a\u8c03\u7528\u4e24\u6b21\u7236\u6784\u9020\u51fd\u6570</strong></p> <ul> <li>\u4e00\u6b21\u662f\u8bbe\u7f6e\u5b50\u7c7b\u578b\u5b9e\u4f8b\u7684\u539f\u578b\u7684\u65f6\u5019\uff1a<code>Child.prototype = new Parent();</code></li> <li>\u4e00\u6b21\u5728\u521b\u5efa\u5b50\u7c7b\u578b\u5b9e\u4f8b\u7684\u65f6\u5019\uff1a <code>var child1 = new Child(&#39;kevin&#39;, &#39;18&#39;);</code></li> </ul> <blockquote> <p>\u6253\u5370 <code>child1</code> \u5bf9\u8c61\uff0c\u6211\u4eec\u4f1a\u53d1\u73b0 <code>Child.prototype</code> \u548c <code>child1</code> \u90fd\u6709\u4e00\u4e2a\u5c5e\u6027\u4e3a <code>colors</code>\uff0c\u5c5e\u6027\u503c\u4e3a <code>[&#39;red&#39;, &#39;blue&#39;, &#39;green&#39;]</code></p> </blockquote> <h3 id="22-\u5bc4\u751f\u7ec4\u5408\u5f0f\u7ee7\u627f">2.2 \u5bc4\u751f\u7ec4\u5408\u5f0f\u7ee7\u627f</h3> <p>\u6bd4\u8f83\u5b8c\u7f8e\u7684\u7ee7\u627f\u65b9\u5f0f</p> <pre><code class="language-js">function Parent(name) {\n  this.name = name;\n  this.colors = [&#39;red&#39;, &#39;blue&#39;, &#39;green&#39;];\n}\n\nParent.prototype.getName = function() {\n  console.log(this.name);\n};\n\nfunction Child(name, age) {\n  Parent.call(this, name);\n  this.age = age;\n}\n\n// \u5173\u952e\u7684\u4e09\u6b65\nvar F = function() {};\nF.prototype = Parent.prototype;\nChild.prototype = new F();\nChild.prototype.constructor = Child;\n\nvar child1 = new Child(&#39;kevin&#39;, &#39;18&#39;);\n\nconsole.log(child1);</code></pre> <blockquote> <p>\u8fd9\u79cd\u65b9\u5f0f\u7684\u9ad8\u6548\u7387\u4f53\u73b0\u5b83\u53ea\u8c03\u7528\u4e86\u4e00\u6b21 <code>Parent</code> \u6784\u9020\u51fd\u6570\uff0c\u5e76\u4e14\u56e0\u6b64\u907f\u514d\u4e86\u5728 <code>Parent.prototype</code> \u4e0a\u9762\u521b\u5efa\u4e0d\u5fc5\u8981\u7684\u3001\u591a\u4f59\u7684\u5c5e\u6027\u3002\u4e0e\u6b64\u540c\u65f6\uff0c\u539f\u578b\u94fe\u8fd8\u80fd\u4fdd\u6301\u4e0d\u53d8\uff1b\u56e0\u6b64\uff0c\u8fd8\u80fd\u591f\u6b63\u5e38\u4f7f\u7528 <code>instanceof</code> \u548c <code>isPrototypeOf</code></p> </blockquote> <p><strong>\u5c01\u88c5\u8fd9\u4e2a\u7ee7\u627f\u65b9\u6cd5\uff1a</strong></p> <pre><code class="language-js">function object(o) {\n  function F() {}\n  F.prototype = o;\n  return new F();\n}\n\nfunction prototype(child, parent) {\n  var prototype = object(parent.prototype);\n  prototype.constructor = child;\n  child.prototype = prototype;\n}\n\n// \u5f53\u6211\u4eec\u4f7f\u7528\u7684\u65f6\u5019\uff1a\nprototype(Child, Parent);</code></pre> <h2 id="3-\u4f5c\u7528\u57df">3 \u4f5c\u7528\u57df</h2> <h3 id="31-\u4f5c\u7528\u57df\u5206\u7c7b">3.1 \u4f5c\u7528\u57df\u5206\u7c7b</h3> <p><strong>\u4ec0\u4e48\u662f\u4f5c\u7528\u57df\uff1a</strong></p> <p>\u4f5c\u7528\u57df\u662f\u6307\u5728\u7a0b\u5e8f\u4e2d\u5b9a\u4e49\u53d8\u91cf\u7684\u533a\u57df\uff0c\u8be5\u4f4d\u7f6e\u51b3\u5b9a\u4e86\u53d8\u91cf\u7684\u751f\u547d\u5468\u671f\u3002\u901a\u4fd7\u5730\u7406\u89e3\uff0c\u4f5c\u7528\u57df\u5c31\u662f\u53d8\u91cf\u4e0e\u51fd\u6570\u7684\u53ef\u8bbf\u95ee\u8303\u56f4\uff0c\u5373\u4f5c\u7528\u57df\u63a7\u5236\u7740\u53d8\u91cf\u548c\u51fd\u6570\u7684\u53ef\u89c1\u6027\u548c\u751f\u547d\u5468\u671f</p> <p>\u6267\u884c\u4e0a\u4e0b\u6587\u4e2d\uff0c\u6709\u4e00\u4e2a\u53d8\u91cf\u73af\u5883\uff0c\u548c\u8bcd\u6cd5\u73af\u5883\u3002\u800c\u4f5c\u7528\u57df\u5c31\u662f\u5c31\u662f\u901a\u8fc7\u53d8\u91cf\u73af\u5883\u6765\u5b9e\u73b0\u7684\uff0c\u53d8\u91cf\u73af\u5883\u5b58\u653e\u5f53\u524d\u4f5c\u7528\u57df\u7684\u53d8\u91cf</p> <p><strong>JavaScript \u662f\u5982\u4f55\u652f\u6301\u5757\u7ea7\u4f5c\u7528\u57df\u7684\uff1a</strong></p> <p>\u8bcd\u6cd5\u73af\u5883\u5b58\u653e let const \u58f0\u660e\u7684\u53d8\u91cf\uff0c\u5f53\u7528\u5230\u4e00\u4e2a\u53d8\u91cf\u7684\u65f6\u5019\u4f1a\u5148\u4ece\u8bcd\u6cd5\u73af\u5883\u67e5\u627e\uff0c\u7136\u540e\u518d\u67e5\u627e\u53d8\u91cf\u73af\u5883</p> <p><strong>\u4f5c\u7528\u57df\u5206\u7c7b\uff1a</strong></p> <ul> <li>\u5168\u5c40\u4f5c\u7528\u57df</li> <li>\u51fd\u6570\u4f5c\u7528\u57df</li> <li>\u5757\u7ea7\u4f5c\u7528\u57df</li> </ul> <p><strong>var \u548c let \u7684\u533a\u522b\uff1a</strong></p> <ol> <li><code>var</code> \u6ca1\u6709\u5757\u7ea7\u4f5c\u7528\u57df</li> <li><code>var</code> \u5141\u8bb8\u91cd\u590d\u58f0\u660e\uff0c<code>let</code> \u91cd\u590d\u58f0\u660e\u4f1a\u62a5\u9519</li> <li><code>var</code> \u5b58\u5728\u53d8\u91cf\u63d0\u5347\uff0c\u4e5f\u5c31\u662f\u53d8\u91cf\u58f0\u660e\u4f1a\u63d0\u5230\u51fd\u6570\u5f00\u5934 (\u53ef\u4ee5\u5148\u4f7f\u7528\uff0c\u518d\u58f0\u660e)\u3002<code>let</code> \u4e0d\u5b58\u5728\u53d8\u91cf\u63d0\u5347</li> </ol> <h3 id="32-\u4f5c\u7528\u57df\u94fe">3.2 \u4f5c\u7528\u57df\u94fe</h3> <ol> <li>\u5728\u6bcf\u4e2a\u6267\u884c\u4e0a\u4e0b\u6587\u7684\u53d8\u91cf\u73af\u5883\u4e2d\uff0c\u90fd\u5305\u542b\u4e86\u4e00\u4e2a\u5916\u90e8\u5f15\u7528\uff0c\u7528\u6765\u6307\u5411\u5916\u90e8\u7684\u6267\u884c\u4e0a\u4e0b\u6587\uff0c\u6211\u4eec\u628a\u8fd9\u4e2a\u5916\u90e8\u5f15\u7528\u79f0\u4e3a <code>outer</code></li> <li>\u5f53\u8bbf\u95ee\u4e00\u4e2a\u53d8\u91cf\u7684\u65f6\u5019\uff0c\u4f1a\u5148\u4ece\u81ea\u5df1\u7684\u6267\u884c\u4e0a\u4e0b\u6587\u4e2d\u67e5\u627e\uff0c\u5982\u679c\u6ca1\u6709\u67e5\u627e\u5230\u5c31\u53bb\u6307\u5411\u7684\u5916\u90e8\u6267\u884c\u4e0a\u4e0b\u6587\u7684\u53d8\u91cf\u73af\u5883\u4e2d\u67e5\u627e</li> <li>\u5916\u90e8\u7684\u53d8\u91cf\u73af\u5883\u4e5f\u6709\u4e00\u4e2a outer \u5f15\u7528\uff0c\u8fd9\u4e2a\u5c31\u662f\u4f5c\u7528\u57df\u94fe</li> </ol> <h3 id="\u9898\u76ee\uff1a\u8c08\u8c08\u4f60\u5bf9\u4f5c\u7528\u57df\u7684\u7406\u89e3">\u9898\u76ee\uff1a\u8c08\u8c08\u4f60\u5bf9\u4f5c\u7528\u57df\u7684\u7406\u89e3</h3> <h2 id="4-\u95ed\u5305">4 \u95ed\u5305</h2> <h3 id="41-\u4ec0\u4e48\u662f\u95ed\u5305">4.1 \u4ec0\u4e48\u662f\u95ed\u5305</h3> <blockquote> <p><strong>\u95ed\u5305</strong> \u662f\u6307\u5185\u90e8\u51fd\u6570\u603b\u662f\u53ef\u4ee5\u8bbf\u95ee\u5176\u6240\u5728\u7684\u5916\u90e8\u51fd\u6570\u4e2d\u58f0\u660e\u7684\u53d8\u91cf\u548c\u53c2\u6570\uff0c\u5373\u4f7f\u5728\u5176\u5916\u90e8\u51fd\u6570\u88ab\u8fd4\u56de\uff08\u5bff\u547d\u7ec8\u7ed3\uff09\u4e86\u4e4b\u540e\u3002\u5728 <code>JavaScript</code> \u4e2d\uff0c\u6240\u6709\u51fd\u6570\u90fd\u662f\u5929\u751f\u95ed\u5305\u7684</p> </blockquote> <h3 id="42-\u95ed\u5305\u7684\u539f\u7406">4.2 \u95ed\u5305\u7684\u539f\u7406</h3> <ol> <li>\u6267\u884c\u4e00\u4e2a\u51fd\u6570\u7684\u65f6\u5019\uff0c\u4f1a\u5148\u8fdb\u884c\u7f16\u8bd1\uff0c\u521b\u5efa\u4e00\u4e2a\u7a7a\u7684\u6267\u884c\u4e0a\u4e0b\u6587</li> <li>\u6267\u884c\u4e0a\u4e0b\u6587\u91cc\u9762\u6709\u4e00\u4e2a\u53d8\u91cf\u73af\u5883\uff0c\u662f\u4fdd\u5b58\u5f53\u524d\u4f5c\u7528\u57df\u7684\u53d8\u91cf\u7684</li> <li>\u7f16\u8bd1\u9047\u5230\u91cc\u9762\u6709\u51fd\u6570\u7684\u65f6\u5019\uff0c\u4f1a\u8fdb\u884c\u4e00\u6b21\u5feb\u901f\u7684\u8bcd\u6cd5\u626b\u63cf</li> <li>\u53d1\u73b0\u91cc\u9762\u6709\u7528\u5230\u5916\u90e8\u53d8\u91cf\uff0c\u5c31\u4f1a\u521b\u5efa\u4e00\u4e2a\u95ed\u5305\u5230\u5806\u7a7a\u95f4 (\u89e3\u91ca\u5806\u7a7a\u95f4\u548c\u6808\u7a7a\u95f4)</li> <li>\u53d8\u91cf\u73af\u5883\u6709\u5bf9\u8fd9\u4e2a\u95ed\u5305\u7684\u5f15\u7528</li> <li>\u975e\u95ed\u5305\u7684\u53d8\u91cf\u662f\u76f4\u63a5\u5b58\u5728\u53d8\u91cf\u73af\u5883\u7684\uff0c\u800c\u95ed\u5305\u7684\u53d8\u91cf\u662f\u5b58\u653e\u5728\u5806\u7a7a\u95f4\u7684</li> <li>\u6240\u4ee5\u5373\u4f7f\u5916\u90e8\u51fd\u6570\u6267\u884c\u5b8c\u4e86\uff0c\u5185\u90e8\u8fd8\u662f\u8fd8\u4fdd\u7559\u4e86\u5bf9\u8fd9\u4e2a\u5305\u7684\u5f15\u7528</li> </ol> <h3 id="\u9898\u76ee\uff1a\u95ed\u5305\u7684\u4f5c\u7528\u548c\u539f\u7406">\u9898\u76ee\uff1a\u95ed\u5305\u7684\u4f5c\u7528\u548c\u539f\u7406</h3> <h2 id="5-\u53d8\u91cf\u63d0\u5347">5 \u53d8\u91cf\u63d0\u5347</h2> <h3 id="51-\u4ec0\u4e48\u662f\u53d8\u91cf\u63d0\u5347">5.1 \u4ec0\u4e48\u662f\u53d8\u91cf\u63d0\u5347</h3> <p>\u6240\u8c13\u7684\u53d8\u91cf\u63d0\u5347\uff0c\u662f\u6307\u5728 JavaScript \u4ee3\u7801\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0cJavaScript \u5f15\u64ce\u628a\u53d8\u91cf\u7684\u58f0\u660e\u90e8\u5206\u548c\u51fd\u6570\u7684\u58f0\u660e\u90e8\u5206\u63d0\u5347\u5230\u4ee3\u7801\u5f00\u5934\u7684\u201c\u884c\u4e3a\u201d\u3002\u53d8\u91cf\u88ab\u63d0\u5347\u540e\uff0c\u4f1a\u7ed9\u53d8\u91cf\u8bbe\u7f6e\u9ed8\u8ba4\u503c\uff0c\u8fd9\u4e2a\u9ed8\u8ba4\u503c\u5c31\u662f\u6211\u4eec\u719f\u6089\u7684 undefined</p> <p><strong>var \u548c let \u7684\u533a\u522b\uff1a</strong></p> <ol> <li><code>var</code> \u6ca1\u6709\u5757\u7ea7\u4f5c\u7528\u57df</li> <li><code>var</code> \u5141\u8bb8\u91cd\u590d\u58f0\u660e\uff0c<code>let</code> \u91cd\u590d\u58f0\u660e\u4f1a\u62a5\u9519</li> <li><code>var</code> \u5b58\u5728\u53d8\u91cf\u63d0\u5347\uff0c\u4e5f\u5c31\u662f\u53d8\u91cf\u58f0\u660e\u4f1a\u63d0\u5230\u51fd\u6570\u5f00\u5934 (\u53ef\u4ee5\u5148\u4f7f\u7528\uff0c\u518d\u58f0\u660e)\u3002<code>let</code> \u4e0d\u5b58\u5728\u53d8\u91cf\u63d0\u5347</li> </ol> <p><strong>\u4e3a\u4ec0\u4e48\u4f1a\u6709\u53d8\u91cf\u63d0\u5347\uff1a</strong></p> <ol> <li>\u4e00\u6bb5 js \u8fd0\u884c\u524d\u4f1a\u8fdb\u884c\u7f16\u8bd1\uff0c\u8fd9\u65f6\u4f1a\u521b\u5efa\u4e00\u4e2a\u6267\u884c\u4e0a\u4e0b\u6587</li> <li>\u6267\u884c\u4e0a\u4e0b\u6587\u91cc\u9762\u6709\u4e00\u4e2a\u53d8\u91cf\u73af\u5883\uff0c\u5b83\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4fdd\u5b58\u5f53\u524d\u4f5c\u7528\u57df\u7684\u53d8\u91cf</li> <li>\u7f16\u8bd1\u7684\u65f6\u5019\uff0c\u53d8\u91cf\u5c31\u4f1a\u5728\u91cc\u9762\u58f0\u660e\uff0c\u503c\u662f undefined</li> </ol> <h3 id="\u9898\u76ee\uff1a\u8c08\u8c08\u53d8\u91cf\u63d0\u5347">\u9898\u76ee\uff1a\u8c08\u8c08\u53d8\u91cf\u63d0\u5347</h3> <h2 id="6-this-\u7684\u6307\u5411">6 this \u7684\u6307\u5411</h2> <h3 id="61-this-\u7684\u6307\u5411">6.1 this \u7684\u6307\u5411</h3> <p><code>this</code> \u59cb\u7ec8\u662f\u70b9\u7b26\u53f7 . \u524d\u9762\u7684\u5bf9\u8c61</p> <h3 id="62-this-\u6307\u5411\u7684\u539f\u7406">6.2 this \u6307\u5411\u7684\u539f\u7406</h3> <p><strong>Reference Type\uff1a</strong></p> <p><code>Reference Type</code> \u662f <code>ECMA</code> \u4e2d\u7684\u4e00\u4e2a\u201c\u89c4\u8303\u7c7b\u578b\u201d\u3002\u6211\u4eec\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528\u5b83\uff0c\u4f46\u5b83\u88ab\u7528\u5728 <code>JavaScript</code> \u8bed\u8a00\u5185\u90e8</p> <p><code>Reference Type</code> \u7684\u503c\u662f\u4e00\u4e2a\u4e09\u4e2a\u503c\u7684\u7ec4\u5408 (base, name, strict)\uff0c\u5176\u4e2d\uff1a</p> <ol> <li><code>base</code> \u662f\u5bf9\u8c61</li> <li><code>name</code> \u662f\u5c5e\u6027\u540d</li> <li><code>strict</code> \u5728 <code>use strict</code> \u6a21\u5f0f\u4e0b\u4e3a <code>true</code></li> </ol> <p><strong>this \u662f\u5982\u4f55\u4f20\u9012\u7684\uff1a</strong></p> <ol> <li>\u70b9 <code>.</code> \u8fd4\u56de\u7684\u4e0d\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u800c\u662f\u4e00\u4e2a\u7279\u6b8a\u7684 <code>Reference Type</code> \u7684\u503c</li> <li><code>Reference Type</code> \u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u201c\u4e2d\u95f4\u4eba\u201d\u5185\u90e8\u7c7b\u578b\uff0c\u76ee\u7684\u662f\u4ece <code>.</code> \u4f20\u9012\u4fe1\u606f\u7ed9 <code>()</code> \u8c03\u7528</li> <li>\u8d4b\u503c <code>hi = user.hi</code> \u7b49\u5176\u4ed6\u7684\u64cd\u4f5c\uff0c\u90fd\u4f1a\u5c06 <code>Reference Type</code> \u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u4e22\u5f03\u6389</li> <li>\u800c\u4f1a\u53d6 <code>user.hi</code>\uff08\u4e00\u4e2a\u51fd\u6570\uff09\u7684\u503c\u5e76\u7ee7\u7eed\u4f20\u9012\u3002\u6240\u4ee5\u4efb\u4f55\u540e\u7eed\u64cd\u4f5c\u90fd\u201c\u4e22\u5931\u201d\u4e86 <code>this</code></li> </ol> <h2 id="7-\u7acb\u5373\u6267\u884c\u51fd\u6570">7 \u7acb\u5373\u6267\u884c\u51fd\u6570</h2> <p><strong>\u4ec0\u4e48\u662f\u7acb\u5373\u6267\u884c\u51fd\u6570\uff1a</strong></p> <p>\u5c31\u662f\u58f0\u660e\u540e\u4e00\u4e2a\u51fd\u6570\u8868\u8fbe\u5f0f\u7136\u540e\u7acb\u5373\u6267\u884c\u5b83</p> <pre><code class="language-js">(function() {})();</code></pre> <p>\u5728 es5 \u4e2d\u6ca1\u6709\u5757\u7ea7\u7684\u4f5c\u7528\u57df\u3002\u7acb\u5373\u6267\u884c\u51fd\u6570\u76f8\u5bf9\u4e8e\u662f\u6a21\u62df\u4e86\u5757\u7ea7\u4f5c\u7528\u57df</p> <h3 id="\u9898\u76ee\uff1a\u4ec0\u4e48\u662f\u7acb\u5373\u6267\u884c\u51fd\u6570">\u9898\u76ee\uff1a\u4ec0\u4e48\u662f\u7acb\u5373\u6267\u884c\u51fd\u6570</h3> <h2 id="8-instanceof-\u539f\u7406">8 instanceof \u539f\u7406</h2> <h3 id="81-\u77e5\u8bc6\u70b9">8.1 \u77e5\u8bc6\u70b9</h3> <p><strong>1. \u9996\u5148\u5224\u65ad\u76ee\u6807\u5bf9\u8c61\u662f\u5426\u6709 Symbol.hasInstance</strong></p> <p>\u5982\u679c\u6709 <code>Symbol.hasInstance</code>\uff0c\u5c31\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\u5224\u65ad</p> <pre><code class="language-js">// \u8bbe\u7f6e instanceOf \u68c0\u67e5\n// \u5e76\u5047\u8bbe\u5177\u6709 canEat \u5c5e\u6027\u7684\u90fd\u662f animal\nclass Animal {\n  static [Symbol.hasInstance](obj) {\n    if (obj.canEat) return true;\n  }\n}\n\nlet obj = { canEat: true };\n\nalert(obj instanceof Animal); // true\uff1aAnimal[Symbol.hasInstance](obj) \u88ab\u8c03\u7528</code></pre> <p><strong>2. \u5982\u679c\u6ca1\u6709 Symbol.hasInstance \u5c31\u9010\u6b65\u5bf9\u6bd4\u539f\u578b\u94fe</strong></p> <p>\u5927\u591a\u6570 <code>class</code> \u6ca1\u6709 <code>Symbol.hasInstance</code>\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6807\u51c6\u7684\u903b\u8f91\u662f\uff1a\u4f7f\u7528 <code>obj instanceOf Class</code> \u68c0\u67e5 <code>Class.prototype</code> \u662f\u5426\u7b49\u4e8e <code>obj</code> \u7684\u539f\u578b\u94fe\u4e2d\u7684\u539f\u578b\u4e4b\u4e00</p> <pre><code class="language-js">obj.__proto__ === Class.prototype?\nobj.__proto__.__proto__ === Class.prototype?\nobj.__proto__.__proto__.__proto__ === Class.prototype?\n\n// \u5982\u679c\u4efb\u610f\u4e00\u4e2a\u7684\u7b54\u6848\u4e3a true\uff0c\u5219\u8fd4\u56de true\n// \u5426\u5219\uff0c\u5982\u679c\u6211\u4eec\u5df2\u7ecf\u68c0\u67e5\u5230\u4e86\u539f\u578b\u94fe\u7684\u5c3e\u7aef\uff0c\u5219\u8fd4\u56de false</code></pre> <h2 id="9-bind-\u5b9e\u73b0">9 bind \u5b9e\u73b0</h2> <h3 id="91-bind-\u662f\u4ec0\u4e48">9.1 bind \u662f\u4ec0\u4e48</h3> <pre><code class="language-js">let bound = func.bind(context, [arg1], [arg2], ...);</code></pre> <p><code>bind()</code> \u65b9\u6cd5\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u51fd\u6570\u3002\u5f53\u8fd9\u4e2a\u65b0\u51fd\u6570\u88ab\u8c03\u7528\u65f6\uff0c<code>bind()</code> \u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u5c06\u4f5c\u4e3a\u5b83\u8fd0\u884c\u65f6\u7684 <code>this</code>\uff0c\u4e4b\u540e\u7684\u4e00\u5e8f\u5217\u53c2\u6570\u5c06\u4f1a\u5728\u4f20\u9012\u7684\u5b9e\u53c2\u524d\u4f20\u5165\u4f5c\u4e3a\u5b83\u7684\u53c2\u6570</p> <h3 id="92-bind-\u5b9e\u73b0">9.2 bind \u5b9e\u73b0</h3> <pre><code class="language-js">Function.prototype.bind2 = function(context) {\n  if (typeof this !== &#39;function&#39;) {\n    throw new Error(&#39;Function.prototype.bind - what is trying to be bound is not callable&#39;);\n  }\n\n  var self = this;\n  var args = Array.prototype.slice.call(arguments, 1);\n\n  var fNOP = function() {};\n\n  var fBound = function() {\n    var bindArgs = Array.prototype.slice.call(arguments);\n    return self.apply(this instanceof fNOP ? this : context, args.concat(bindArgs));\n  };\n\n  fNOP.prototype = this.prototype;\n  fBound.prototype = new fNOP();\n  return fBound;\n};</code></pre> <h3 id="\u9898\u76ee\uff1abind-\u7684\u5b9e\u73b0">\u9898\u76ee\uff1abind \u7684\u5b9e\u73b0</h3> <h2 id="10-apply-\u548c-call">10 apply \u548c call</h2> <h3 id="101-\u77e5\u8bc6\u70b9">10.1 \u77e5\u8bc6\u70b9</h3> <p><code>apply</code> \u548c <code>call</code> \u90fd\u80fd\u591f\u6539\u53d8\u51fd\u6570\u6267\u884c\u65f6\u7684\u4e0a\u4e0b\u6587\uff0c\u5373\u4f20\u9012 <code>this</code></p> <p><strong>\u4f8b\u5b50\uff1a</strong></p> <pre><code class="language-js">function say(phrase) {\n  alert(this.name + &#39;: &#39; + phrase);\n}\n\nlet user = { name: &#39;John&#39; };\n\n// user \u6210\u4e3a this\uff0c&quot;Hello&quot; \u6210\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\nsay.call(user, &#39;Hello&#39;); // John: Hello</code></pre> <p><strong>call \u548c apply \u7684\u533a\u522b\uff1a</strong></p> <p><code>call</code> \u548c <code>apply</code> \u4e4b\u95f4\u552f\u4e00\u7684\u8bed\u6cd5\u533a\u522b\u662f\uff0c<code>call</code> \u671f\u671b\u4e00\u4e2a\u53c2\u6570\u5217\u8868\uff0c\u800c <code>apply</code> \u671f\u671b\u4e00\u4e2a\u5305\u542b\u8fd9\u4e9b\u53c2\u6570\u7684\u7c7b\u6570\u7ec4\u5bf9\u8c61 (arguments)</p> <h2 id="11-\u67ef\u91cc\u5316">11 \u67ef\u91cc\u5316</h2> <h3 id="111-\u67ef\u91cc\u5316\u76f8\u5173\u6982\u5ff5">11.1 \u67ef\u91cc\u5316\u76f8\u5173\u6982\u5ff5</h3> <p><a href="/js/others">\u67ef\u91cc\u5316\u76f8\u5173\u6982\u5ff5</a></p> <h3 id="112-\u9898\u76ee\uff1a\u5b9e\u73b0-add123">11.2 \u9898\u76ee\uff1a\u5b9e\u73b0 add(1)(2)(3)</h3> <p><strong>\u56fa\u5b9a\u53c2\u6570\u4e2a\u6570\uff1a</strong></p> <pre><code class="language-js">const curry = (fn, ...args) =&gt;\n  // \u51fd\u6570\u7684\u53c2\u6570\u4e2a\u6570\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u51fd\u6570\u6570\u7684.length\u5c5e\u6027\u6765\u8bbf\u95ee\n  // \u4f20\u5165\u7684\u53c2\u6570\u5927\u4e8e\u7b49\u4e8e\u539f\u59cb\u51fd\u6570fn\u7684\u53c2\u6570\u4e2a\u6570\uff0c\u5219\u76f4\u63a5\u6267\u884c\u8be5\u51fd\u6570\uff0c\u5426\u5219\u7ee7\u7eed\u79d1\u91cc\u5316\n  args.length &gt;= fn.length ? fn(...args) : (..._args) =&gt; curry(fn, ...args, ..._args);</code></pre> <p><strong>\u53c2\u6570\u4e2a\u6570\u4e0d\u56fa\u5b9a\uff1a</strong></p> <pre><code class="language-js">function add(...args) {\n  let sum = 0;\n\n  for (let i = 0; i &lt; args.length; i++) {\n    sum = sum + args[i];\n  }\n\n  return sum;\n}\n\nfunction currying(fn) {\n  let sum = 0;\n\n  let curringFn = function(...args) {\n    let val = fn(...args);\n    sum += val;\n    return curringFn;\n  };\n\n  curringFn.toString = function() {\n    return sum;\n  };\n\n  return curringFn;\n}\n\nlet sum = currying(add);\n\nconsole.log(sum(1)(2)(3)(4, 5).toString());</code></pre> <h2 id="12-v8-\u5783\u573e\u56de\u6536\u673a\u5236">12 v8 \u5783\u573e\u56de\u6536\u673a\u5236</h2> <h3 id="121-\u5783\u573e\u56de\u6536\u673a\u5236">12.1 \u5783\u573e\u56de\u6536\u673a\u5236</h3> <p>\bjs \u5185\u5b58\u7a7a\u95f4\u5206\u4e3a\u4ee3\u7801\u7a7a\u95f4\u3001\u6808\u7a7a\u95f4\u3001\u5806\u7a7a\u95f4</p> <p><strong>\u6808\u7a7a\u95f4\uff1a</strong></p> <ol> <li>\u6267\u884c js \u4ee3\u7801\u7684\u65f6\u5019\uff0c\u9996\u5148\u4f1a\u521b\u5efa\u4e00\u4e2a\u5168\u5c40\u7684\u6267\u884c\u4e0a\u4e0b\u6587</li> <li>\u5f53\u9047\u5230\u51fd\u6570\u7684\u60c5\u51b5\u65f6\uff0c\u4f1a\u4e3a\u5176\u521b\u5efa\u4e00\u4e2a\u51fd\u6570\u6267\u884c\u4e0a\u4e0b\u6587(Context)\u73af\u5883</li> <li>\u6267\u884c\u4e0a\u4e0b\u6587\u4f1a\u88ab\u6dfb\u52a0\u5230\u8c03\u7528\u5806\u6808\u7684\u6808\u9876</li> <li>\u6267\u884c\u4e0a\u4e0b\u6587\u4e2d\u7684\u53d8\u91cf\u5bf9\u8c61\u5305\u542b\u4e86\u5b83\u7684\u53c2\u6570\u548c\u6240\u6709\u53d8\u91cf</li> <li>\u5f53\u8be5\u51fd\u6570\u6267\u884c\u5b8c\u6bd5\u540e\uff0c\u5bf9\u5e94\u7684\u6267\u884c\u4e0a\u4e0b\u6587\u4ece\u6808\u9876\u5f39\u51fa\uff0c\u51fd\u6570\u7684\u4f5c\u7528\u57df\u4f1a\u968f\u4e4b\u9500\u6bc1\uff0c\u5176\u5305\u542b\u7684\u6240\u6709\u53d8\u91cf\u4e5f\u4f1a\u7edf\u4e00\u91ca\u653e\u5e76\u88ab\u81ea\u52a8\u56de\u6536</li> </ol> <p><strong>\u5806\u7a7a\u95f4\uff1a</strong></p> <ol> <li>\u5bf9\u8c61\u662f\u5f15\u7528\u7c7b\u578b\uff0c\u5b58\u5728\u5806\u7a7a\u95f4\u4e2d\uff0c\u53d8\u91cf\u5bf9\u5b83\u53ea\u662f\u5f15\u7528</li> <li>\u5c31\u662f\u8bf4\u4e00\u4e2a\u53d8\u91cf\u5b83\u6307\u5411\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8fd9\u4e2a\u53d8\u91cf\u4f1a\u5728\u6267\u884c\u4e0a\u4e0b\u6587\u7684\u53d8\u91cf\u5bf9\u8c61\u4e2d\uff0c\u4f46\u662f\u8fd9\u4e2a\u5bf9\u8c61\u4e0d\u5728\u6808\u7a7a\u95f4\uff0c\u800c\u662f\u5728\u5806\u7a7a\u95f4</li> <li>\u4ece\u6839\u8282\u70b9\u51fa\u53d1(window)\u5bf9\u8c61\uff0c\u904d\u5386\u4e00\u904d\u6807\u8bb0\u5bf9\u8c61\u662f\u5426\u88ab\u5f15\u7528 (\u8fd9\u4e00\u6b65\u5305\u542b\u5f88\u591a\u64cd\u4f5c)</li> <li>\u904d\u5386\u5b8c\u540e\uff0c\u6ca1\u6709\u88ab\u5f15\u7528\u7684\u5bf9\u8c61\u5c31\u4f1a\u88ab\u56de\u6536</li> </ol> <ul> <li>\u5783\u573e\u56de\u6536\u5668\u4f1a\u5728\u5185\u90e8\u6784\u5efa\u4e00\u4e2a\u6839\u5217\u8868\uff0c\u7528\u4e8e\u4ece\u6839\u8282\u70b9\u51fa\u53d1\u53bb\u5bfb\u627e\u90a3\u4e9b\u53ef\u4ee5\u88ab\u8bbf\u95ee\u5230\u7684\u53d8\u91cf\u3002\u6bd4\u5982\u5728 <code>JavaScript</code> \u4e2d\uff0c<code>window</code> \u5168\u5c40\u5bf9\u8c61\u53ef\u4ee5\u770b\u6210\u4e00\u4e2a\u6839\u8282\u70b9</li> <li>\u7136\u540e\uff0c\u5783\u573e\u56de\u6536\u5668\u4ece\u6240\u6709\u6839\u8282\u70b9\u51fa\u53d1\uff0c\u904d\u5386\u5176\u53ef\u4ee5\u8bbf\u95ee\u5230\u7684\u5b50\u8282\u70b9\uff0c\u5e76\u5c06\u5176\u6807\u8bb0\u4e3a\u6d3b\u52a8\u7684\uff0c\u6839\u8282\u70b9\u4e0d\u80fd\u5230\u8fbe\u7684\u5730\u65b9\u5373\u4e3a\u975e\u6d3b\u52a8\u7684\uff0c\u5c06\u4f1a\u88ab\u89c6\u4e3a\u5783\u573e</li> <li>\u6700\u540e\uff0c\u5783\u573e\u56de\u6536\u5668\u5c06\u4f1a\u91ca\u653e\u6240\u6709\u975e\u6d3b\u52a8\u7684\u5185\u5b58\u5757\uff0c\u5e76\u5c06\u5176\u5f52\u8fd8\u7ed9\u64cd\u4f5c\u7cfb\u7edf</li> </ul> <h3 id="122-\u76f8\u5173\u6982\u5ff5">12.2 \u76f8\u5173\u6982\u5ff5</h3> <p><strong>\u5185\u5b58\u7ed3\u6784\uff1a</strong></p> <ul> <li><strong>\u65b0\u751f\u4ee3(new_space)\uff1a</strong>\u5927\u591a\u6570\u7684\u5bf9\u8c61\u5f00\u59cb\u90fd\u4f1a\u88ab\u5206\u914d\u5728\u8fd9\u91cc\uff0c\u8fd9\u4e2a\u533a\u57df\u76f8\u5bf9\u8f83\u5c0f\u4f46\u662f\u5783\u573e\u56de\u6536\u7279\u522b\u9891\u7e41\uff0c\u8be5\u533a\u57df\u88ab\u5206\u4e3a\u4e24\u534a\uff0c\u4e00\u534a\u7528\u6765\u5206\u914d\u5185\u5b58\uff0c\u53e6\u4e00\u534a\u7528\u4e8e\u5728\u5783\u573e\u56de\u6536\u65f6\u5c06\u9700\u8981\u4fdd\u7559\u7684\u5bf9\u8c61\u590d\u5236\u8fc7\u6765</li> <li><strong>\u8001\u751f\u4ee3(old_space)\uff1a</strong>\u65b0\u751f\u4ee3\u4e2d\u7684\u5bf9\u8c61\u5728\u5b58\u6d3b\u4e00\u6bb5\u65f6\u95f4\u540e\u5c31\u4f1a\u88ab\u8f6c\u79fb\u5230\u8001\u751f\u4ee3\u5185\u5b58\u533a\uff0c\u76f8\u5bf9\u4e8e\u65b0\u751f\u4ee3\u8be5\u5185\u5b58\u533a\u57df\u7684\u5783\u573e\u56de\u6536\u9891\u7387\u8f83\u4f4e\u3002\u8001\u751f\u4ee3\u53c8\u5206\u4e3a\u8001\u751f\u4ee3\u6307\u9488\u533a\u548c\u8001\u751f\u4ee3\u6570\u636e\u533a\uff0c\u524d\u8005\u5305\u542b\u5927\u591a\u6570\u53ef\u80fd\u5b58\u5728\u6307\u5411\u5176\u4ed6\u5bf9\u8c61\u7684\u6307\u9488\u7684\u5bf9\u8c61\uff0c\u540e\u8005\u53ea\u4fdd\u5b58\u539f\u59cb\u6570\u636e\u5bf9\u8c61\uff0c\u8fd9\u4e9b\u5bf9\u8c61\u6ca1\u6709\u6307\u5411\u5176\u4ed6\u5bf9\u8c61\u7684\u6307\u9488</li> <li><strong>\u5927\u5bf9\u8c61\u533a(large_object_space)\uff1a</strong>\u5b58\u653e\u4f53\u79ef\u8d85\u8d8a\u5176\u4ed6\u533a\u57df\u5927\u5c0f\u7684\u5bf9\u8c61\uff0c\u6bcf\u4e2a\u5bf9\u8c61\u90fd\u4f1a\u6709\u81ea\u5df1\u7684\u5185\u5b58\uff0c\u5783\u573e\u56de\u6536\u4e0d\u4f1a\u79fb\u52a8\u5927\u5bf9\u8c61\u533a</li> <li><strong>\u4ee3\u7801\u533a(code_space)\uff1a</strong>\u4ee3\u7801\u5bf9\u8c61\uff0c\u4f1a\u88ab\u5206\u914d\u5728\u8fd9\u91cc\uff0c\u552f\u4e00\u62e5\u6709\u6267\u884c\u6743\u9650\u7684\u5185\u5b58\u533a\u57df</li> <li><strong>map \u533a(map_space)\uff1a</strong>\u5b58\u653e <code>Cell</code> \u548c <code>Map</code>\uff0c\u6bcf\u4e2a\u533a\u57df\u90fd\u662f\u5b58\u653e\u76f8\u540c\u5927\u5c0f\u7684\u5143\u7d20</li> </ul> <h3 id="123-\u5982\u4f55\u907f\u514d\u5185\u5b58\u6cc4\u9732">12.3 \u5982\u4f55\u907f\u514d\u5185\u5b58\u6cc4\u9732</h3> <ol> <li><strong>\u5c3d\u53ef\u80fd\u5c11\u7684\u521b\u5efa\u5168\u5c40\u53d8\u91cf\uff1a</strong> \u5168\u5c40\u53d8\u91cf\u4e0d\u4f1a\u91ca\u653e\uff0c\u9664\u975e\u624b\u52a8\u8bbe\u7f6e\u4e3a null</li> <li><strong>\u624b\u52a8\u6e05\u9664\u5b9a\u65f6\u5668\uff1a</strong> \u6bd4\u5982 <code>setInterval</code>\uff0c\u4e0d\u6e05\u9664\u4f1a\u4e00\u76f4\u6267\u884c</li> <li><strong>\u5c11\u7528\u95ed\u5305\uff1a</strong> \u6ce8\u610f\u6e05\u9664\u5f15\u7528</li> <li><strong>\u6e05\u9664 DOM \u7684\u5f15\u7528\uff1a</strong> \u6bd4\u5982 <code>let ele = document.getElementById(&#39;button&#39;)</code>\uff0c\u5982\u679c <code>ele</code> \u4e3a\u6e05\u9664\uff0c\u90a3\u4e48\u5373\u4f7f\u8282\u70b9\u5728 html \u4e2d\u88ab\u5220\u9664\uff0c\u4e5f\u8fd8\u4f1a\u7559\u5728\u5185\u5b58\u4e2d</li> <li><strong>\u5f31\u5f15\u7528\uff1a</strong> WeakMap\u3001WeakSet</li> </ol> <h3 id="\u9898\u76ee\uff1av8-\u5783\u573e\u56de\u6536\u673a\u5236">\u9898\u76ee\uff1av8 \u5783\u573e\u56de\u6536\u673a\u5236</h3> <h2 id="13-\u6d6e\u70b9\u6570\u7cbe\u5ea6">13 \u6d6e\u70b9\u6570\u7cbe\u5ea6</h2> <h3 id="131-\u4e3a\u4ec0\u4e48\u4f1a\u7cbe\u5ea6\u4e22\u5931">13.1 \u4e3a\u4ec0\u4e48\u4f1a\u7cbe\u5ea6\u4e22\u5931</h3> <p>\u5728\u5185\u90e8\uff0c\u6570\u5b57\u662f\u4ee5 64 \u4f4d\u683c\u5f0f IEEE-754 \u8868\u793a\u7684\uff0c\u6240\u4ee5\u6b63\u597d\u6709 64 \u4f4d\u53ef\u4ee5\u5b58\u50a8\u4e00\u4e2a\u6570\u5b57\uff1a\u5176\u4e2d 52 \u4f4d\u88ab\u7528\u4e8e\u5b58\u50a8\u8fd9\u4e9b\u6570\u5b57\uff0c\u5176\u4e2d 11 \u4f4d\u7528\u4e8e\u5b58\u50a8\u5c0f\u6570\u70b9\u7684\u4f4d\u7f6e\uff08\u5bf9\u4e8e\u6574\u6570\uff0c\u5b83\u4eec\u4e3a\u96f6\uff09\uff0c\u800c 1 \u4f4d\u7528\u4e8e\u7b26\u53f7</p> <p>\u4e00\u4e2a\u6570\u5b57\u4ee5\u5176\u4e8c\u8fdb\u5236\u7684\u5f62\u5f0f\u5b58\u50a8\u5728\u5185\u5b58\u4e2d\uff0c\u4e00\u4e2a 1 \u548c 0 \u7684\u5e8f\u5217\u3002\u4e8c\u8fdb\u5236\u5f62\u5f0f\u4e2d 0.1\uff0c0.2 \u8fd9\u6837\u7684\u5c0f\u6570\u662f\u65e0\u9650\u5faa\u73af\u5c0f\u6570</p> <p>\u4f7f\u7528\u4e8c\u8fdb\u5236\u6570\u5b57\u7cfb\u7edf\u65e0\u6cd5 \u7cbe\u786e \u5b58\u50a8 0.1 \u6216 0.2\uff0c\u5c31\u50cf\u6ca1\u6709\u529e\u6cd5\u5c06\u4e09\u5206\u4e4b\u4e00\u5b58\u50a8\u4e3a\u5341\u8fdb\u5236\u5c0f\u6570\u4e00\u6837</p> <h3 id="132-\u9898\u76ee\uff1a0102-\u4e3a\u4ec0\u4e48\u4e0d\u7b49\u4e8e-03">13.2 \u9898\u76ee\uff1a0.1+0.2 \u4e3a\u4ec0\u4e48\u4e0d\u7b49\u4e8e 0.3</h3> <h2 id="14-new-\u64cd\u4f5c\u7b26">14 new \u64cd\u4f5c\u7b26</h2> <h3 id="141-\u6982\u5ff5">14.1 \u6982\u5ff5</h3> <p><strong>new \u662f\u4ec0\u4e48\uff1a</strong></p> <p>new \u8fd0\u7b97\u7b26\u521b\u5efa\u4e00\u4e2a \u7528\u6237\u5b9a\u4e49\u7684\u5bf9\u8c61\u7c7b\u578b \u6216 \u5177\u6709\u6784\u9020\u51fd\u6570\u7684\u5185\u7f6e\u5bf9\u8c61\u7c7b\u578b \u7684\u5b9e\u4f8b</p> <p><strong>new \u64cd\u4f5c\u7b26\u5177\u4f53\u505a\u4e86\u4ec0\u4e48\uff1a</strong></p> <ol> <li>\u521b\u5efa\u4e86\u4e00\u4e2a\u65b0\u5bf9\u8c61</li> <li>\u8ba9\u65b0\u5bf9\u8c61\u80fd\u591f\u8bbf\u95ee\u6784\u9020\u51fd\u6570\u91cc\u9762\u7684\u5c5e\u6027</li> <li>\u80fd\u591f\u8bbf\u95ee\u6784\u9020\u51fd\u6570 <code>prototype</code> \u4e2d\u7684\u5c5e\u6027</li> </ol> <p><strong>\u5b9e\u73b0\u4e00\u4e2a\u65b9\u6cd5\u6a21\u62df new \u7684\u529f\u80fd\uff1a</strong></p> <pre><code class="language-js">function objectFactory(Constructor, ...args) {\n  let obj = new Object();\n\n  obj.__proto__ = Constructor.prototype;\n\n  let ret = Constructor.call(obj, ...args);\n\n  // \u6784\u9020\u51fd\u6570\u7684\u7279\u6027\n  // \u5982\u679c\u6784\u9020\u51fd\u6570\u8fd4\u56de\u4e86\u4e00\u4e2a\u5bf9\u8c61\uff0c\u90a3\u4e48 new \u8fd4\u56de\u7684\u5c31\u662f\u8fd9\u4e2a\u5bf9\u8c61\n  // \u5982\u679c\u662f\u539f\u59cb\u503c\uff0c\u90a3\u4e48\u5c31\u5ffd\u7565\uff0c\u8fd4\u56de\u4e00\u4e2a\u5b9e\u4f8b\u5316\u7684\u5bf9\u8c61\n  return typeof ret === &#39;object&#39; ? ret : obj;\n}</code></pre> <h3 id="\u9898\u76ee\uff1anew-\u64cd\u4f5c\u7b26\u5177\u4f53\u505a\u4e86\u4ec0\u4e48">\u9898\u76ee\uff1anew \u64cd\u4f5c\u7b26\u5177\u4f53\u505a\u4e86\u4ec0\u4e48</h3> <h2 id="15-\u4e8b\u4ef6\u5faa\u73af\u673a\u5236">15 \u4e8b\u4ef6\u5faa\u73af\u673a\u5236</h2> <h3 id="151-\u77e5\u8bc6\u70b9">15.1 \u77e5\u8bc6\u70b9</h3> <p><strong>\u540c\u6b65\u4efb\u52a1\u548c\u5f02\u6b65\u4efb\u52a1\uff1a</strong></p> <ol> <li>JS \u5206\u4e3a\u540c\u6b65\u4efb\u52a1\u548c\u5f02\u6b65\u4efb\u52a1</li> <li>\u540c\u6b65\u4efb\u52a1\u90fd\u5728\u4e3b\u7ebf\u7a0b\u4e0a\u6267\u884c\uff0c\u5f62\u6210\u4e00\u4e2a\u6267\u884c\u6808</li> <li>\u4e3b\u7ebf\u7a0b\u4e4b\u5916\uff0c\u4e8b\u4ef6\u89e6\u53d1\u7ebf\u7a0b\u7ba1\u7406\u7740\u4e00\u4e2a\u4efb\u52a1\u961f\u5217\uff0c\u53ea\u8981\u5f02\u6b65\u4efb\u52a1\u6709\u4e86\u8fd0\u884c\u7ed3\u679c\uff0c\u5c31\u5728\u4efb\u52a1\u961f\u5217\u4e4b\u4e2d\u653e\u7f6e\u4e00\u4e2a\u4e8b\u4ef6</li> <li>\u4e00\u65e6\u6267\u884c\u6808\u4e2d\u7684\u6240\u6709\u540c\u6b65\u4efb\u52a1\u6267\u884c\u5b8c\u6bd5\uff08\u6b64\u65f6 <code>JS</code> \u5f15\u64ce\u7a7a\u95f2\uff09\uff0c\u7cfb\u7edf\u5c31\u4f1a\u8bfb\u53d6\u4efb\u52a1\u961f\u5217\uff0c\u5c06\u53ef\u8fd0\u884c\u7684\u5f02\u6b65\u4efb\u52a1\u6dfb\u52a0\u5230\u53ef\u6267\u884c\u6808\u4e2d\uff0c\u5f00\u59cb\u6267\u884c</li> </ol> <p><strong>\u4e8b\u4ef6\u5faa\u73af\u673a\u5236\uff1a</strong></p> <ol> <li>\u4e3b\u7ebf\u7a0b\u8fd0\u884c\u65f6\u4f1a\u4ea7\u751f\u6267\u884c\u6808</li> <li>\u6808\u4e2d\u7684\u4ee3\u7801\u8c03\u7528\u67d0\u4e9b <code>api</code> \u65f6\uff0c\u5b83\u4eec\u4f1a\u5728\u4e8b\u4ef6\u961f\u5217\u4e2d\u6dfb\u52a0\u5404\u79cd\u4e8b\u4ef6\uff08\u5f53\u6ee1\u8db3\u89e6\u53d1\u6761\u4ef6\u540e\uff0c\u5982 <code>ajax</code> \u8bf7\u6c42\u5b8c\u6bd5\uff09</li> <li>\u800c\u6808\u4e2d\u7684\u4ee3\u7801\u6267\u884c\u5b8c\u6bd5\uff0c\u5c31\u4f1a\u8bfb\u53d6\u4e8b\u4ef6\u961f\u5217\u4e2d\u7684\u4e8b\u4ef6\uff0c\u53bb\u6267\u884c\u90a3\u4e9b\u56de\u8c03</li> <li>\u5982\u6b64\u5faa\u73af</li> <li>\u6ce8\u610f\uff0c\u603b\u662f\u8981\u7b49\u5f85\u6808\u4e2d\u7684\u4ee3\u7801\u6267\u884c\u5b8c\u6bd5\u540e\u624d\u4f1a\u53bb\u8bfb\u53d6\u4e8b\u4ef6\u961f\u5217\u4e2d\u7684\u4e8b\u4ef6</li> </ol> <p><strong>\u5fae\u4efb\u52a1\u548c\u5b8f\u4efb\u52a1\uff1a</strong></p> <ul> <li><code>macrotask</code>\uff08\u53c8\u79f0\u4e4b\u4e3a\u5b8f\u4efb\u52a1\uff09\uff0c\u53ef\u4ee5\u7406\u89e3\u662f\u6bcf\u6b21\u6267\u884c\u6808\u6267\u884c\u7684\u4ee3\u7801\u5c31\u662f\u4e00\u4e2a\u5b8f\u4efb\u52a1\uff08\u5305\u62ec\u6bcf\u6b21\u4ece\u4e8b\u4ef6\u961f\u5217\u4e2d\u83b7\u53d6\u4e00\u4e2a\u4e8b\u4ef6\u56de\u8c03\u5e76\u653e\u5230\u6267\u884c\u6808\u4e2d\u6267\u884c\uff09<ol> <li>\u6bcf\u4e00\u4e2a <code>task</code> \u4f1a\u4ece\u5934\u5230\u5c3e\u5c06\u8fd9\u4e2a\u4efb\u52a1\u6267\u884c\u5b8c\u6bd5\uff0c\u4e0d\u4f1a\u6267\u884c\u5176\u5b83</li> <li>\u6d4f\u89c8\u5668\u4e3a\u4e86\u80fd\u591f\u4f7f\u5f97 <code>JS</code> \u5185\u90e8 <code>task</code> \u4e0e <code>DOM</code> \u4efb\u52a1\u80fd\u591f\u6709\u5e8f\u7684\u6267\u884c\uff0c\u4f1a\u5728\u4e00\u4e2a <code>task</code> \u6267\u884c\u7ed3\u675f\u540e\uff0c\u5728\u4e0b\u4e00\u4e2a <code>task</code> \u6267\u884c\u5f00\u59cb\u524d\uff0c\u5bf9\u9875\u9762\u8fdb\u884c\u91cd\u65b0\u6e32\u67d3</li> </ol> </li> <li><code>microtask</code>\uff08\u53c8\u79f0\u4e3a\u5fae\u4efb\u52a1\uff09\uff0c\u53ef\u4ee5\u7406\u89e3\u662f\u5728\u5f53\u524d <code>task</code> \u6267\u884c\u7ed3\u675f\u540e\u7acb\u5373\u6267\u884c\u7684\u4efb\u52a1<ol> <li>\u4e5f\u5c31\u662f\u8bf4\uff0c\u5728\u5f53\u524d <code>task</code> \u4efb\u52a1\u540e\uff0c\u4e0b\u4e00\u4e2a <code>task</code> \u4e4b\u524d\uff0c\u5728\u6e32\u67d3\u4e4b\u524d\uff0c\u4f1a\u6267\u884c <strong>\u6240\u6709\u7684</strong> \u5fae\u4efb\u52a1</li> <li>\u6240\u4ee5\u5b83\u7684\u54cd\u5e94\u901f\u5ea6\u76f8\u6bd4 <code>setTimeout</code>\uff08<code>setTimeout</code> \u662f <code>task</code>\uff09\u4f1a\u66f4\u5feb\uff0c\u56e0\u4e3a\u65e0\u9700\u7b49\u6e32\u67d3</li> </ol> </li> </ul> <blockquote> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u5728\u67d0\u4e00\u4e2a <code>macrotask</code> \u6267\u884c\u5b8c\u540e\uff0c\u5c31\u4f1a\u5c06\u5728\u5b83\u6267\u884c\u671f\u95f4\u4ea7\u751f\u7684\u6240\u6709 microtask \u90fd\u6267\u884c\u5b8c\u6bd5\uff08\u5728\u6e32\u67d3\u524d\uff09</p> </blockquote> <p><strong>\u5206\u522b\u5f88\u4e48\u6837\u7684\u573a\u666f\u4f1a\u5f62\u6210 <code>macrotask</code> \u548c <code>microtask</code>\uff1a</strong></p> <ul> <li><code>macrotask</code>\uff1a\u4e3b\u4ee3\u7801\u5757\uff0c<code>setTimeout</code>\uff0c<code>setInterval</code> \u7b49\uff08\u53ef\u4ee5\u770b\u5230\uff0c\u4e8b\u4ef6\u961f\u5217\u4e2d\u7684\u6bcf\u4e00\u4e2a\u4e8b\u4ef6\u90fd\u662f\u4e00\u4e2a <code>macrotask</code>\uff09</li> <li><code>microtask</code>\uff1a<code>Promise</code>\uff0c<code>process.nextTick</code>\uff0c<code>MutationObserver</code></li> </ul> <p>\u5b8f\u4efb\u52a1\uff1a</p> <ul> <li>\u6e32\u67d3\u4e8b\u4ef6\uff08\u5982\u89e3\u6790 DOM\u3001\u8ba1\u7b97\u5e03\u5c40\u3001\u7ed8\u5236\uff09</li> <li>\u7528\u6237\u4ea4\u4e92\u4e8b\u4ef6\uff08\u5982\u9f20\u6807\u70b9\u51fb\u3001\u6eda\u52a8\u9875\u9762\u3001\u653e\u5927\u7f29\u5c0f\u7b49\uff09</li> <li>JavaScript \u811a\u672c\u6267\u884c\u4e8b\u4ef6</li> <li>\u7f51\u7edc\u8bf7\u6c42\u5b8c\u6210\u3001\u6587\u4ef6\u8bfb\u5199\u5b8c\u6210\u4e8b\u4ef6</li> </ul> <h3 id="\u9898\u76ee\uff1a\u8c08\u4e0b\u4e8b\u4ef6\u5faa\u73af\u673a\u5236">\u9898\u76ee\uff1a\u8c08\u4e0b\u4e8b\u4ef6\u5faa\u73af\u673a\u5236</h3> <h2 id="16-promise-\u539f\u7406">16 promise \u539f\u7406</h2> <h3 id="161-promise-\u77e5\u8bc6\u70b9">16.1 Promise \u77e5\u8bc6\u70b9</h3> <p><a href="/js/promise">Promise \u76f8\u5173\u77e5\u8bc6\u70b9</a></p> <h3 id="162-\u5b9e\u73b0-promise">16.2 \u5b9e\u73b0 promise</h3> <pre><code class="language-js">class MyPromise {\n  constructor(fn) {\n    this.state = &#39;pending&#39;; // padding/fulfilled/rejected\n    this.value = null;\n    this.resolveCbs = [];\n    this.rejectCbs = [];\n\n    let resolve = value =&gt; {\n      if (this.state !== &#39;pending&#39;) return;\n\n      this.state = &#39;fulfilled&#39;;\n      this.value = value;\n\n      this.resolveCbs.forEach(cb =&gt; cb(this.value));\n    };\n\n    let reject = value =&gt; {\n      if (this.state !== &#39;pending&#39;) return;\n\n      this.state = &#39;rejected&#39;;\n      this.value = value;\n\n      this.rejectCbs.forEach(cb =&gt; cb(this.value));\n    };\n\n    fn(resolve, reject);\n  }\n\n  then(fnResolve, fnReject) {\n    return new MyPromise((resolve, reject) =&gt; {\n      this.resolveCbs.push(value =&gt; {\n        if (typeof fnResolve !== &#39;function&#39;) fnResolve = value =&gt; value;\n\n        let res = fnResolve(value);\n        res instanceof MyPromise ? res.then(resolve, reject) : resolve(res);\n      });\n\n      this.rejectCbs.push(value =&gt; {\n        if (typeof fnReject !== &#39;function&#39;)\n          fnReject = value =&gt; {\n            throw value;\n          };\n\n        let res = fnReject(value);\n        res instanceof MyPromise ? res.then(resolve, reject) : reject(res);\n      });\n    });\n  }\n\n  catch(fnReject) {\n    this.then(null, fnReject);\n  }\n\n  finally(fn) {\n    // finally \u7684\u7279\u70b9\uff1a\u603b\u4f1a\u6267\u884c\uff0c\u5e76\u4e14\u4e5f\u662f\u8fd4\u56de Promise\uff0c\u4f46\u5411\u4e0b\u4f1a\u4f20\u9012\u7684\u662f\u4e0a\u4e00\u6b21\u7684\u503c\u800c\u4e0d\u662f finally \u4e2d\u7684\u503c\n    return this.then(\n      res =&gt; {\n        return MyPromise.resolve(fn()).then(() =&gt; res);\n      },\n      err =&gt; {\n        return MyPromise.resolve(fn()).then(null, () =&gt; {\n          throw err;\n        });\n      }\n    );\n  }\n}\n\nMyPromise.resolve = function(value) {\n  return new MyPromise((resolve, reject) =&gt; {\n    if (value instanceof MyPromise) {\n      value.then(resolve, reject);\n    } else {\n      resolve(value);\n    }\n  });\n};\n\nMyPromise.reject = function(value) {\n  return new MyPromise((resolve, reject) =&gt; {\n    reject(value);\n  }).then(null, value);\n};\n\nMyPromise.all = function(promises) {\n  // \u63a5\u53d7\u4e00\u4e2a\u6570\u7ec4\uff0c\u53ea\u6709\u90fd\u6210\u529f\u624d\u7b97\u6210\u529f\uff0c\u4e00\u4e2a\u9519\u5c31\u5f02\u5e38\n  return new MyPromise((resolve, reject) =&gt; {\n    let arr = []; // \u63a5\u53d7\u6bcf\u4e2a promise \u7684\u8fd4\u56de\u503c\uff0c\u548c promises \u4e00\u4e00\u5bf9\u5e94\uff0c\u987a\u5e8f\u4e00\u81f4\n    let count = 0;\n\n    promises.forEach((p, i) =&gt; {\n      if (p instanceof MyPromise) {\n        p.then(\n          res =&gt; {\n            arr[i] = res;\n            count++;\n            if (count &gt;= promises.length) resolve(arr);\n          },\n          err =&gt; {\n            reject(err);\n          }\n        );\n      } else {\n        arr[i] = p;\n        count++;\n        if (count &gt;= promises.length) resolve(arr);\n      }\n    });\n  });\n};\n\nMyPromise.race = function(promises) {\n  // \u63a5\u53d7\u4e00\u4e2a\u6570\u7ec4\uff0c\u6700\u5148\u8fd4\u56de\u6210\u529f\u5c31\u6210\u529f\uff0c\u6700\u5148\u5931\u8d25\u5c31\u5931\u8d25\n  return new MyPromise((resolve, reject) =&gt; {\n    promises.forEach(p =&gt; {\n      if (p instanceof Promise) {\n        p.then(\n          res =&gt; {\n            resolve(res);\n          },\n          err =&gt; {\n            reject(err);\n          }\n        );\n      } else {\n        resolve(p);\n      }\n    });\n  });\n};</code></pre> <h3 id="162-\u9898\u76ee\uff1a\u5b9e\u73b0\u4e00\u4e2a-promise">16.2 \u9898\u76ee\uff1a\u5b9e\u73b0\u4e00\u4e2a promise</h3> <h2 id="17-generator-\u539f\u7406">17 generator \u539f\u7406</h2> <h3 id="\u9898\u76ee\uff1a\u8bf4\u4e0b-generator-\u539f\u7406">\u9898\u76ee\uff1a\u8bf4\u4e0b generator \u539f\u7406</h3> ';e.exports=n}}]);