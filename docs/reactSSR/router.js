(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["docs/reactSSR/router"],{"9MQ1":function(t,e,o){var n=o("Rxnk"),r=o("A4en"),c=n(r),a='<h1 id="\u5728-ssr-\u4e2d\u4f7f\u7528\u8def\u7531">\u5728 SSR \u4e2d\u4f7f\u7528\u8def\u7531</h1> <p>demo \u5730\u5740 <a href="https://github.com/wawjqyh/demo-react-ssr/tree/master/4-router">https://github.com/wawjqyh/demo-react-ssr/tree/master/4-router</a></p> <p>\u9996\u5148\u770b\u672c\u6b21\u7528\u4f8b\u7684\u9879\u76ee\u7ed3\u6784\uff1a</p> <p><img src="'+c+'" alt=""></p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u914d\u7f6e\u8def\u7531\u7684\u7ec4\u4ef6\uff0c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\u90fd\u662f\u8c03\u7528\u8fd9\u4e2a\u7ec4\u4ef6\uff1a</p> <pre><code class="language-javascript">// src/router.jsx\n// \u8def\u7531\u914d\u7f6e\u6587\u4ef6\nclass RouterIndex extends Component {\n  render() {\n    return (\n      &lt;React.Fragment&gt;\n        &lt;Route exact path=&quot;/&quot; component={Index} /&gt;\n        &lt;Route exact path=&quot;/login&quot; component={Login} /&gt;\n        &lt;Route exact path=&quot;/hello&quot; component={Hello} /&gt;\n      &lt;/React.Fragment&gt;\n    );\n  }\n}</code></pre> <p>\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\u4f7f\u7528\u8def\u7531\u7684\u65b9\u5f0f\u533a\u522b\u4e0d\u5927\uff0c\u5ba2\u6237\u7aef\u6e32\u67d3\u4f7f\u7528\u7684\u662f <code>BrowserRouter</code>\u3002</p> <p>\u5982\u4e0b\u9762\u7684\u4ee3\u7801\uff1a</p> <pre><code class="language-javascript">// src/main.jsx\n// \u5ba2\u6237\u7aef\u4f7f\u7528\u8def\u7531\nconst appTarget = document.getElementById(&#39;root&#39;);\nReactDOM.hydrate(\n  &lt;BrowserRouter&gt;\n    &lt;RouterIndex /&gt;\n  &lt;/BrowserRouter&gt;,\n  appTarget\n);</code></pre> <p>\u800c\u670d\u52a1\u7aef\u6e32\u67d3\u4f7f\u7528\u7684\u662f <code>StaticRouter</code>\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code class="language-javascript">// server/router.js\n// \u670d\u52a1\u7aef\u4f7f\u7528\u8def\u7531\nrouter.get(&#39;*&#39;, (ctx, next) =&gt; {\n  const content = renderToString(\n    &lt;StaticRouter location={ctx.request.url} context={{}}&gt;\n      &lt;RouterIndex /&gt;\n    &lt;/StaticRouter&gt;\n  );\n\n  ctx.body = `\n    &lt;html&gt;\n      &lt;head&gt;\n        &lt;title&gt;react srr&lt;/title&gt;\n      &lt;/head&gt;\n      &lt;body&gt;\n        &lt;div id=&quot;root&quot;&gt;${content}&lt;/div&gt;\n        &lt;script src=&quot;/client.js&quot;&gt;&lt;/script&gt;\n      &lt;/body&gt;\n    &lt;/html&gt;\n  `;\n});</code></pre> <p>\u6ce8\u610f\u70b9\uff1a</p> <ul> <li><code>router.get(&#39;*&#39;)</code> \u670d\u52a1\u7aef\u9700\u8981\u5339\u914d\u6240\u6709\u7684\u8def\u7531</li> <li><code>StaticRouter</code> \u9700\u8981\u4f20\u5165\u670d\u52a1\u7aef\u6240\u5339\u914d\u5230\u7684\u5730\u5740\u3002<code>BrowserRouter</code> \u53ef\u4ee5\u76f4\u63a5\u62ff\u5230\u5f53\u524d\u5730\u5740\uff0c\u56e0\u4e3a\u8fd0\u884c\u5728\u6d4f\u89c8\u5668\u7aef</li> </ul> <blockquote> <p>\u56e0\u4e3a\u4f7f\u7528\u4e86\u540c\u6784\uff0c\u670d\u52a1\u7aef\u6e32\u67d3\u53ea\u6e32\u67d3\u7b2c\u4e00\u6b21\u8bf7\u6c42\u7684\u9875\u9762</p> </blockquote> <blockquote> <p>\u9875\u9762\u5728\u6d4f\u89c8\u5668\u8fd0\u884c\u540e\uff0c\u540e\u9762\u7684\u8def\u7531\u8df3\u8f6c\u548c\u9875\u9762\u6e32\u67d3\u5c31\u4f1a\u7531\u5ba2\u6237\u7aef\u63a5\u7ba1\uff0c\u56e0\u4e3a\u5355\u9875\u9762\u5e94\u7528\u8def\u7531\u8df3\u8f6c\u4f1a\u88ab\u62e6\u622a\u3002</p> </blockquote> ';t.exports=a}}]);